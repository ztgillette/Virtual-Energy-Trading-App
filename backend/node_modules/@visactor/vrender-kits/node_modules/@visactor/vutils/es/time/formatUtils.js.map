{"version":3,"sources":["../src/time/formatUtils.ts"],"names":[],"mappings":"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","file":"formatUtils.js","sourcesContent":["import pad from '../common/pad';\nimport type { DateLikeType } from '../common/toDate';\nimport { toDate } from '../common/toDate';\n\nexport function fullYearGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\n}\n\nexport function monthGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCMonth' : 'getMonth';\n}\n\nexport function dateGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCDate' : 'getDate';\n}\n\nexport function hoursGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCHours' : 'getHours';\n}\n\nexport function minutesGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\n}\n\nexport function secondsGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\n}\n\nexport function millisecondsGetterName(isUTC?: boolean) {\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n}\n\nexport function fullYearSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\n}\n\nexport function monthSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCMonth' : 'setMonth';\n}\n\nexport function dateSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCDate' : 'setDate';\n}\n\nexport function hoursSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCHours' : 'setHours';\n}\n\nexport function minutesSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\n}\n\nexport function secondsSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\n}\n\nexport function millisecondsSetterName(isUTC?: boolean) {\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n}\n\n/**\n * 根据时间推断格式化字符串\n * @param value\n * @param isUTC\n * @returns\n */\nexport function getFormatFromValue(value: DateLikeType, isUTC?: boolean) {\n  const date = toDate(value);\n  const M = (date as any)[monthGetterName(isUTC)]() + 1;\n  const d = (date as any)[dateGetterName(isUTC)]();\n  const h = (date as any)[hoursGetterName(isUTC)]();\n  const m = (date as any)[minutesGetterName(isUTC)]();\n  const s = (date as any)[secondsGetterName(isUTC)]();\n  const S = (date as any)[millisecondsGetterName(isUTC)]();\n\n  const isSecond = S === 0;\n  const isMinute = isSecond && s === 0;\n  const isHour = isMinute && m === 0;\n  const isDay = isHour && h === 0;\n  const isMonth = isDay && d === 1;\n  const isYear = isMonth && M === 1;\n\n  if (isYear) {\n    return 'YYYY';\n  } else if (isMonth) {\n    return 'YYYY-MM';\n  } else if (isDay) {\n    return 'YYYY-MM-DD';\n  } else if (isHour) {\n    return 'HH';\n  } else if (isMinute) {\n    return 'HH:mm';\n  } else if (isSecond) {\n    return 'HH:mm:ss';\n  }\n  return 'HH:mm:ss SSS';\n}\n\nexport function getTimeFormatter(template: string, isUTC?: boolean) {\n  return (time: DateLikeType) => {\n    const date = toDate(time);\n    const y = date[fullYearGetterName(isUTC)]();\n    const M = date[monthGetterName(isUTC)]() + 1;\n    const q = Math.floor((M - 1) / 3) + 1;\n    const d = date[dateGetterName(isUTC)]();\n    const e = date[('get' + (isUTC ? 'UTC' : '') + 'Day') as 'getDay' | 'getUTCDay']();\n    const H = date[hoursGetterName(isUTC)]();\n    const h = ((H - 1) % 12) + 1;\n    const m = date[minutesGetterName(isUTC)]();\n    const s = date[secondsGetterName(isUTC)]();\n    const S = date[millisecondsGetterName(isUTC)]();\n\n    // 月份，周等需要管理管理locale的时间格式化暂时不支持\n    return (\n      (template || '')\n        .replace(/YYYY/g, pad(y + '', 4, '0', 'left'))\n        .replace(/yyyy/g, y + '')\n        .replace(/yy/g, (y % 100) + '')\n        .replace(/Q/g, q + '')\n        // .replace(/{MMMM}/g, month[M - 1])\n        // .replace(/{MMM}/g, monthAbbr[M - 1])\n        .replace(/MM/g, pad(M, 2, '0', 'left'))\n        .replace(/M/g, M + '')\n        .replace(/dd/g, pad(d, 2, '0', 'left'))\n        .replace(/d/g, d + '')\n        // .replace(/{eeee}/g, dayOfWeek[e])\n        // .replace(/{ee}/g, dayOfWeekAbbr[e])\n        .replace(/e/g, e + '')\n        .replace(/HH/g, pad(H, 2, '0', 'left'))\n        .replace(/H/g, H + '')\n        .replace(/hh/g, pad(h + '', 2, '0', 'left'))\n        .replace(/h/g, h + '')\n        .replace(/mm/g, pad(m, 2, '0', 'left'))\n        .replace(/m/g, m + '')\n        .replace(/ss/g, pad(s, 2, '0', 'left'))\n        .replace(/s/g, s + '')\n        .replace(/SSS/g, pad(S, 3, '0', 'left'))\n        .replace(/S/g, S + '')\n    );\n  };\n}\n"]}