{"version":3,"sources":["../src/interface/graphic-service.ts"],"names":[],"mappings":"","file":"graphic-service.js","sourcesContent":["import type { IAABBBounds } from '@visactor/vutils';\n\nimport type { ISyncHook } from './sync-hook';\nimport type { IGraphic, IGraphicAttribute } from './graphic';\nimport type { IStage } from './stage';\nimport type {\n  IRectGraphicAttribute,\n  IGroup,\n  IGroupGraphicAttribute,\n  ISymbolGraphicAttribute,\n  ICircleGraphicAttribute,\n  ICircle,\n  ISymbol,\n  IArcGraphicAttribute,\n  IArc,\n  IAreaGraphicAttribute,\n  IArea,\n  ILineGraphicAttribute,\n  IPathGraphicAttribute,\n  ILine,\n  IPath,\n  IPolygonGraphicAttribute,\n  IPolygon,\n  ITextGraphicAttribute,\n  IText,\n  IRichTextGraphicAttribute,\n  IRichText,\n  IImageGraphicAttribute,\n  IImage,\n  IRect3dGraphicAttribute,\n  IRect,\n  IRect3d,\n  IShadowRoot,\n  IWrapTextGraphicAttribute\n} from './graphic/index';\n\nexport interface IGraphicService {\n  // themeService: IThemeService;\n  onAttributeUpdate: (graphic: IGraphic) => void;\n  onSetStage: (graphic: IGraphic, stage: IStage) => void;\n  onRemove: (graphic: IGraphic) => void;\n  onRelease: (graphic: IGraphic) => void;\n  onAddIncremental: (graphic: IGraphic, group: IGroup, stage: IStage) => void;\n  onClearIncremental: (group: IGroup, stage: IStage) => void;\n  hooks: {\n    onAttributeUpdate: ISyncHook<[IGraphic]>;\n    onSetStage: ISyncHook<[IGraphic, IStage]>;\n    onRemove: ISyncHook<[IGraphic]>;\n    onRelease: ISyncHook<[IGraphic]>;\n    onAddIncremental: ISyncHook<[IGraphic, IGroup, IStage]>;\n    onClearIncremental: ISyncHook<[IGroup, IStage]>;\n    beforeUpdateAABBBounds: ISyncHook<[IGraphic, IStage, boolean, IAABBBounds]>;\n    afterUpdateAABBBounds: ISyncHook<[IGraphic, IStage, IAABBBounds, { globalAABBBounds: IAABBBounds }, boolean]>;\n    clearAABBBounds: ISyncHook<[IGraphic, IStage, IAABBBounds]>;\n  };\n  beforeUpdateAABBBounds: (graphic: IGraphic, stage: IStage, willUpdate: boolean, bounds: IAABBBounds) => void;\n  afterUpdateAABBBounds: (\n    graphic: IGraphic,\n    stage: IStage,\n    bounds: IAABBBounds,\n    params: { globalAABBBounds: IAABBBounds },\n    selfChange: boolean\n  ) => void;\n  clearAABBBounds: (graphic: IGraphic, stage: IStage, b: IAABBBounds) => void;\n\n  creator: IGraphicCreator;\n  validCheck: (\n    attribute: Partial<IGraphicAttribute>,\n    theme: Required<IGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => boolean;\n\n  transformAABBBounds: (\n    attribute: Partial<IGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    theme: Required<IGraphicAttribute>,\n    miter: boolean,\n    graphic?: IGraphic\n  ) => void;\n\n  updateHTMLTextAABBBounds: (\n    attribute: ITextGraphicAttribute,\n    textTheme: Required<ITextGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IText\n  ) => void;\n\n  combindShadowAABBBounds: (bounds: IAABBBounds, graphic?: IGraphic) => void;\n  updateTempAABBBounds: (aabbBounds: IAABBBounds) => { tb1: IAABBBounds; tb2: IAABBBounds };\n}\n\nexport type IGraphicCreator = {\n  arc: (attributes: IArcGraphicAttribute) => IArc;\n  area: (attributes: IAreaGraphicAttribute) => IArea;\n  circle: (attributes: ICircleGraphicAttribute) => ICircle;\n  group: (attributes: IGroupGraphicAttribute) => IGroup;\n  image: (attributes: IImageGraphicAttribute) => IImage;\n  line: (attributes: ILineGraphicAttribute) => ILine;\n  path: (attributes: IPathGraphicAttribute) => IPath;\n  rect: (attributes: IRectGraphicAttribute) => IRect;\n  rect3d: (attributes: IRect3dGraphicAttribute) => IRect3d;\n  symbol: (attributes: ISymbolGraphicAttribute) => ISymbol;\n  text: (attributes: ITextGraphicAttribute) => IText;\n  richtext: (attributes: IRichTextGraphicAttribute) => IRichText;\n  polygon: (attributes: IPolygonGraphicAttribute) => IPolygon;\n  shadowRoot: (graphic?: IGraphic) => IShadowRoot;\n  wrapText: (attributes: IWrapTextGraphicAttribute) => IText;\n};\n\nexport interface IArcBoundsContribution {\n  updateBounds: (\n    attribute: IArcGraphicAttribute,\n    arcTheme: Required<IArcGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\n\nexport interface IAreaBoundsContribution {\n  updateBounds: (\n    attribute: IAreaGraphicAttribute,\n    arcTheme: Required<IAreaGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\n\nexport interface ICircleBoundsContribution {\n  updateBounds: (\n    attribute: ICircleGraphicAttribute,\n    circleTheme: Required<ICircleGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\n\nexport interface IPathBoundsContribution {\n  updateBounds: (\n    attribute: IPathGraphicAttribute,\n    pathTheme: Required<IPathGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\n\nexport interface IRectBoundsContribution {\n  updateBounds: (\n    attribute: IRectGraphicAttribute,\n    rectTheme: Required<IRectGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\n\nexport interface ISymbolBoundsContribution {\n  updateBounds: (\n    attribute: ISymbolGraphicAttribute,\n    SymbolTheme: Required<ISymbolGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\nexport interface IImageBoundsContribution {\n  updateBounds: (\n    attribute: IImageGraphicAttribute,\n    ImageTheme: Required<IImageGraphicAttribute>,\n    aabbBounds: IAABBBounds,\n    graphic?: IGraphic\n  ) => IAABBBounds;\n}\n"]}