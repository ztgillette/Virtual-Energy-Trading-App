{"version":3,"sources":["../src/common/segment/curve/curve-context.ts"],"names":[],"mappings":"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","file":"curve-context.js","sourcesContent":["import type { IPath2D, ICustomPath2D, ILineCurve, ICubicBezierCurve, IQuadraticBezierCurve } from '../../../interface';\nimport { Point } from '@visactor/vutils';\nimport { LineCurve } from './line';\nimport { CubicBezierCurve } from './cubic-bezier';\nimport { QuadraticBezierCurve } from './quadratic-bezier';\n\nexport class CurveContext implements IPath2D {\n  declare path: ICustomPath2D;\n  private _lastX: number;\n  private _lastY: number;\n  private _startX: number;\n  private _startY: number;\n\n  constructor(path: ICustomPath2D) {\n    this.path = path;\n    this._lastX = this._lastY = this._startX = this._startY = 0;\n  }\n  moveTo(x: number, y: number) {\n    this._lastX = this._startX = x;\n    this._lastY = this._startY = y;\n    return this;\n  }\n  lineTo(x: number, y: number) {\n    const curve = this.addLinearCurve(x, y);\n    this.path.addCurve(curve);\n    this._lastX = x;\n    this._lastY = y;\n  }\n  // linear\n  protected addLinearCurve(x: number, y: number): ILineCurve {\n    const curve = new LineCurve(new Point(this._lastX, this._lastY), new Point(x, y));\n    return curve;\n  }\n  quadraticCurveTo(aCPx: number, aCPy: number, aX: number, aY: number) {\n    const curve: IQuadraticBezierCurve = new QuadraticBezierCurve(\n      new Point(this._lastX, this._lastY),\n      new Point(aCPx, aCPy),\n      new Point(aX, aY)\n    );\n    this.path.addCurve(curve);\n    this._lastX = aX;\n    this._lastY = aY;\n  }\n  bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number): void {\n    const curve: ICubicBezierCurve = new CubicBezierCurve(\n      new Point(this._lastX, this._lastY),\n      new Point(cp1x, cp1y),\n      new Point(cp2x, cp2y),\n      new Point(x, y)\n    );\n    this.path.addCurve(curve);\n    this._lastX = x;\n    this._lastY = y;\n  }\n  arcTo(aX1: number, aY1: number, aX2: number, aY2: number, aRadius: number) {\n    throw new Error('CurveContext不支持调用arcTo');\n  }\n  ellipse(\n    aX: number,\n    aY: number,\n    xRadius: number,\n    yRadius: number,\n    aRotation: number,\n    aStartAngle: number,\n    aEndAngle: number,\n    aClockwise: boolean\n  ) {\n    throw new Error('CurveContext不支持调用ellipse');\n  }\n  rect(x: number, y: number, w: number, h: number) {\n    throw new Error('CurveContext不支持调用rect');\n  }\n  arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean) {\n    throw new Error('CurveContext不支持调用arc');\n  }\n  closePath(): void {\n    if (this.path.curves.length < 2) {\n      return;\n    }\n    this.lineTo(this._startX, this._startY);\n  }\n}\n"]}