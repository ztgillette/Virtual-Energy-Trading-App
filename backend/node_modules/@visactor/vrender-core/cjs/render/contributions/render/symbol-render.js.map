{"version":3,"sources":["../src/render/contributions/render/symbol-render.ts"],"names":[],"mappings":"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","file":"symbol-render.js","sourcesContent":["import { inject, injectable, named } from '../../../common/inversify-lite';\n// eslint-disable-next-line\nimport { ContributionProvider } from '../../../common/contribution-provider';\nimport { getTheme } from '../../../graphic/theme';\nimport { SYMBOL_NUMBER_TYPE } from '../../../graphic/constants';\nimport type {\n  IGraphicAttribute,\n  IContext2d,\n  IMarkAttribute,\n  ISymbol,\n  IThemeAttribute,\n  ISymbolRenderContribution,\n  IDrawContext,\n  IRenderService,\n  IGraphicRender,\n  IGraphicRenderDrawParams,\n  IContributionProvider,\n  ICustomPath2D,\n  ISymbolGraphicAttribute\n} from '../../../interface';\nimport type {} from '../../render-service';\nimport { BaseRender } from './base-render';\nimport { SymbolRenderContribution } from './contributions/constants';\nimport { isArray } from '@visactor/vutils';\nimport {\n  defaultSymbolBackgroundRenderContribution,\n  defaultSymbolClipRangeStrokeRenderContribution,\n  defaultSymbolRenderContribution,\n  defaultSymbolTextureRenderContribution\n} from './contributions';\n\n@injectable()\nexport class DefaultCanvasSymbolRender extends BaseRender<ISymbol> implements IGraphicRender {\n  type: 'symbol';\n  numberType: number = SYMBOL_NUMBER_TYPE;\n\n  constructor(\n    @inject(ContributionProvider)\n    @named(SymbolRenderContribution)\n    protected readonly graphicRenderContributions: IContributionProvider<ISymbolRenderContribution>\n  ) {\n    super();\n    this.builtinContributions = [\n      defaultSymbolRenderContribution,\n      defaultSymbolBackgroundRenderContribution,\n      defaultSymbolTextureRenderContribution,\n      defaultSymbolClipRangeStrokeRenderContribution\n    ];\n    this.init(graphicRenderContributions);\n  }\n\n  drawShape(\n    symbol: ISymbol,\n    context: IContext2d,\n    x: number,\n    y: number,\n    drawContext: IDrawContext,\n    params?: IGraphicRenderDrawParams,\n    fillCb?: (\n      ctx: IContext2d,\n      markAttribute: Partial<IMarkAttribute & IGraphicAttribute>,\n      themeAttribute: IThemeAttribute\n    ) => boolean,\n    strokeCb?: (\n      ctx: IContext2d,\n      markAttribute: Partial<IMarkAttribute & IGraphicAttribute>,\n      themeAttribute: IThemeAttribute\n    ) => boolean,\n    symbolAttribute?: Required<ISymbolGraphicAttribute>\n  ) {\n    // const symbolAttribute = graphicService.themeService.getCurrentTheme().symbolAttribute;\n    symbolAttribute = symbolAttribute ?? getTheme(symbol, params?.theme).symbol;\n\n    const {\n      size = symbolAttribute.size,\n      x: originX = symbolAttribute.x,\n      y: originY = symbolAttribute.y,\n      scaleX = symbolAttribute.scaleX,\n      scaleY = symbolAttribute.scaleY,\n      fillStrokeOrder = symbolAttribute.fillStrokeOrder,\n      clipRange = symbolAttribute.clipRange\n    } = symbol.attribute;\n\n    const data = this.valid(symbol, symbolAttribute, fillCb, strokeCb);\n    if (!data) {\n      return;\n    }\n    const { fVisible, sVisible, doFill, doStroke } = data;\n\n    const parsedPath = symbol.getParsedPath();\n    // todo: 考虑使用path\n    if (!parsedPath) {\n      return;\n    }\n\n    const { keepDirIn3d = symbolAttribute.keepDirIn3d } = symbol.attribute;\n    const z = this.z ?? 0;\n    context.beginPath();\n\n    const callback = (p: ICustomPath2D, a: any) => {\n      // 如果是svg的话，合并一下fill和stroke\n      if (symbol._parsedPath.svgCache) {\n        const obj = Object.assign({}, a);\n        obj.fill = a.fill ?? symbol.attribute.fill;\n        obj.opacity = a.opacity ?? symbol.attribute.opacity;\n        obj.fillOpacity = symbol.attribute.fillOpacity;\n        obj.stroke = a.stroke ?? symbol.attribute.stroke;\n        obj.lineWidth = a.lineWidth ?? symbol.attribute.lineWidth;\n        a = obj;\n      }\n      const _runFill = () => {\n        if (a.fill) {\n          if (fillCb) {\n            fillCb(context, symbol.attribute, symbolAttribute);\n          } else {\n            context.setCommonStyle(symbol, a, originX - x, originY - y, symbolAttribute);\n            context.fill();\n          }\n        }\n      };\n      const _runStroke = () => {\n        if (a.stroke) {\n          if (strokeCb) {\n            strokeCb(context, symbol.attribute, symbolAttribute);\n          } else if (sVisible && clipRange >= 1) {\n            context.setStrokeStyle(symbol, a, (originX - x) / scaleX, (originY - y) / scaleY, symbolAttribute);\n            context.stroke();\n          }\n        }\n      };\n      if (!fillStrokeOrder) {\n        _runFill();\n        _runStroke();\n      } else {\n        _runStroke();\n        _runFill();\n      }\n    };\n    let _size = size;\n    let _x = x;\n    let _y = y;\n    let _z = z;\n    const camera = context.camera;\n    if (keepDirIn3d && camera && context.project) {\n      const p = context.project(x, y, z);\n      context.camera = null;\n      _size = isArray(size) ? [size[0] * scaleX, size[1] * scaleY] : size * scaleX;\n      _x = p.x;\n      _y = p.y;\n      _z = undefined;\n    }\n    if (parsedPath.draw(context, size, _x, _y, _z, callback) === false) {\n      context.closePath();\n    }\n    context.camera = camera;\n\n    // shadow\n    context.setShadowBlendStyle && context.setShadowBlendStyle(symbol, symbol.attribute, symbolAttribute);\n\n    this.beforeRenderStep(\n      symbol,\n      context,\n      x,\n      y,\n      doFill,\n      doStroke,\n      fVisible,\n      sVisible,\n      symbolAttribute,\n      drawContext,\n      fillCb,\n      strokeCb\n    );\n\n    // if (fill !== false) {\n    //   context.setCommonStyle(symbol.attribute, symbolAttribute);\n    //   context.fill();\n    // }\n    // if (stroke !== false) {\n    //   context.setStrokeStyle(symbol.attribute, symbolAttribute);\n    //   context.stroke();\n    // }\n\n    // svg就不用fill和stroke了\n    // 内联的函数性能差\n    // const _runFill = () => {\n    //   if (doFill && !parsedPath.isSvg) {\n    //     if (fillCb) {\n    //       fillCb(context, symbol.attribute, symbolAttribute);\n    //     } else if (fVisible) {\n    //       context.setCommonStyle(symbol, symbol.attribute, originX - x, originY - y, symbolAttribute);\n    //       context.fill();\n    //     }\n    //   }\n    // };\n    // const _runStroke = () => {\n    //   if (doStroke && !parsedPath.isSvg) {\n    //     if (strokeCb) {\n    //       strokeCb(context, symbol.attribute, symbolAttribute);\n    //     } else if (sVisible && clipRange >= 1) {\n    //       // 如果clipRange < 1，就需要靠afterRender进行绘制了\n    //       context.setStrokeStyle(\n    //         symbol,\n    //         symbol.attribute,\n    //         (originX - x) / scaleX,\n    //         (originY - y) / scaleY,\n    //         symbolAttribute\n    //       );\n    //       context.stroke();\n    //     }\n    //   }\n    // };\n\n    if (!fillStrokeOrder) {\n      this._runFill(symbol, context, x, y, symbolAttribute, doFill, fVisible, originX, originY, parsedPath, fillCb);\n      this._runStroke(\n        symbol,\n        context,\n        x,\n        y,\n        symbolAttribute,\n        doStroke,\n        sVisible,\n        originX,\n        originY,\n        parsedPath,\n        clipRange,\n        scaleX,\n        scaleY,\n        strokeCb\n      );\n    } else {\n      this._runStroke(\n        symbol,\n        context,\n        x,\n        y,\n        symbolAttribute,\n        doStroke,\n        sVisible,\n        originX,\n        originY,\n        parsedPath,\n        clipRange,\n        scaleX,\n        scaleY,\n        strokeCb\n      );\n      this._runFill(symbol, context, x, y, symbolAttribute, doFill, fVisible, originX, originY, parsedPath, fillCb);\n    }\n\n    this.afterRenderStep(\n      symbol,\n      context,\n      x,\n      y,\n      doFill,\n      doStroke,\n      fVisible,\n      sVisible,\n      symbolAttribute,\n      drawContext,\n      fillCb,\n      strokeCb\n    );\n  }\n\n  private _runFill(\n    symbol: ISymbol,\n    context: IContext2d,\n    x: number,\n    y: number,\n    symbolAttribute: Required<ISymbolGraphicAttribute>,\n    doFill: boolean,\n    fVisible: boolean,\n    originX: number,\n    originY: number,\n    parsedPath: any,\n    fillCb?: (\n      ctx: IContext2d,\n      markAttribute: Partial<IMarkAttribute & IGraphicAttribute>,\n      themeAttribute: IThemeAttribute\n    ) => boolean\n  ) {\n    if (doFill && !parsedPath.isSvg) {\n      if (fillCb) {\n        fillCb(context, symbol.attribute, symbolAttribute);\n      } else if (fVisible) {\n        context.setCommonStyle(symbol, symbol.attribute, originX - x, originY - y, symbolAttribute);\n        context.fill();\n      }\n    }\n  }\n\n  private _runStroke(\n    symbol: ISymbol,\n    context: IContext2d,\n    x: number,\n    y: number,\n    symbolAttribute: Required<ISymbolGraphicAttribute>,\n    doStroke: boolean,\n    sVisible: boolean,\n    originX: number,\n    originY: number,\n    parsedPath: any,\n    clipRange: number,\n    scaleX: number,\n    scaleY: number,\n    strokeCb?: (\n      ctx: IContext2d,\n      markAttribute: Partial<IMarkAttribute & IGraphicAttribute>,\n      themeAttribute: IThemeAttribute\n    ) => boolean\n  ) {\n    if (doStroke && !parsedPath.isSvg) {\n      if (strokeCb) {\n        strokeCb(context, symbol.attribute, symbolAttribute);\n      } else if (sVisible && clipRange >= 1) {\n        // 如果clipRange < 1，就需要靠afterRender进行绘制了\n        context.setStrokeStyle(\n          symbol,\n          symbol.attribute,\n          (originX - x) / scaleX,\n          (originY - y) / scaleY,\n          symbolAttribute\n        );\n        context.stroke();\n      }\n    }\n  }\n\n  draw(symbol: ISymbol, renderService: IRenderService, drawContext: IDrawContext, params?: IGraphicRenderDrawParams) {\n    const symbolAttribute = getTheme(symbol, params?.theme).symbol;\n    this._draw(symbol, symbolAttribute, false, drawContext, params);\n  }\n}\n"]}