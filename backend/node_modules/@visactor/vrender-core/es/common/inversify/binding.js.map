{"version":3,"sources":["../src/common/inversify/binding.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAC;AAEzC,OAAO,EAAE,gBAAgB,EAAE,eAAe,EAAE,MAAM,iBAAiB,CAAC;AAEpE,MAAM,OAAO;IA0CX,YAAY,iBAA2D,EAAE,KAA8B;QACrG,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC,kBAAkB,EAAE,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAC3C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC,OAAO,CAAC;QACpC,IAAI,CAAC,UAAU,GAAG,CAAC,OAAkC,EAAE,EAAE,CAAC,IAAI,CAAC;QAC/D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAGrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED,KAAK;QACH,MAAM,KAAK,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9D,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,KAAK,KAAK,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC;QACtF,KAAK,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACnD,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACvC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QAEvB,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAGnC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,OAAO,KAAK,CAAC;IACf,CAAC;CACF;AAED,OAAO,EAAE,OAAO,EAAE,CAAC","file":"binding.js","sourcesContent":["import { Generator } from '../generator';\nimport type { interfaces } from './interfaces';\nimport { BindingScopeEnum, BindingTypeEnum } from './literal_types';\n\nclass Binding<TActivated> implements interfaces.Binding<TActivated> {\n  id: number;\n  moduleId!: interfaces.ContainerModuleBase['id'];\n\n  // Determines weather the bindings has been already activated\n  // The activation action takes place when an instance is resolved\n  // If the scope is singleton it only happens once\n  activated: boolean;\n\n  // A runtime identifier because at runtime we don't have interfaces\n  serviceIdentifier: interfaces.ServiceIdentifier<TActivated>;\n\n  // constructor from binding to or toConstructor\n  implementationType: interfaces.Newable<TActivated> | TActivated | null;\n\n  // Cache used to allow singleton scope and BindingType.ConstantValue bindings\n  cache: TActivated | null;\n\n  // Cache used to allow BindingType.DynamicValue bindings\n  dynamicValue: interfaces.DynamicValue<TActivated> | null;\n\n  // The scope mode to be used\n  scope: interfaces.BindingScope;\n\n  // The kind of binding\n  type: interfaces.BindingType;\n\n  // A factory method used in BindingType.Factory bindings\n  factory: interfaces.FactoryCreator<unknown> | null;\n\n  // An async factory method used in BindingType.Provider bindings\n  provider: interfaces.ProviderCreator<unknown> | null;\n\n  // A constraint used to limit the contexts in which this binding is applicable\n  constraint: interfaces.ConstraintFunction;\n\n  // // On activation handler (invoked just before an instance is added to cache and injected)\n  // onActivation: interfaces.BindingActivation<TActivated> | null;\n\n  // // On deactivation handler (invoked just before an instance is unbinded and removed from container)\n  // onDeactivation: interfaces.BindingDeactivation<TActivated> | null;\n\n  constructor(serviceIdentifier: interfaces.ServiceIdentifier<TActivated>, scope: interfaces.BindingScope) {\n    this.id = Generator.GenAutoIncrementId();\n    this.activated = false;\n    this.serviceIdentifier = serviceIdentifier;\n    this.scope = scope;\n    this.type = BindingTypeEnum.Invalid;\n    this.constraint = (request: interfaces.Request | null) => true;\n    this.implementationType = null;\n    this.cache = null;\n    this.factory = null;\n    this.provider = null;\n    // this.onActivation = null;\n    // this.onDeactivation = null;\n    this.dynamicValue = null;\n  }\n\n  clone(): interfaces.Binding<TActivated> {\n    const clone = new Binding(this.serviceIdentifier, this.scope);\n    clone.activated = clone.scope === BindingScopeEnum.Singleton ? this.activated : false;\n    clone.implementationType = this.implementationType;\n    clone.dynamicValue = this.dynamicValue;\n    clone.scope = this.scope;\n    clone.type = this.type;\n    // clone.factory = this.factory;\n    clone.provider = this.provider;\n    clone.constraint = this.constraint;\n    // clone.onActivation = this.onActivation;\n    // clone.onDeactivation = this.onDeactivation;\n    clone.cache = this.cache;\n    return clone;\n  }\n}\n\nexport { Binding };\n"]}