{"version":3,"sources":["../src/eventsUtils.ts"],"names":[],"mappings":"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","file":"eventsUtils.js","sourcesContent":["import type { IVChart, EventCallback, EventParamsDefinition, EventFilter } from '@visactor/vchart';\nimport { isFunction, isObject, isShallowEqual } from '@visactor/vutils';\n\nexport interface LegendEventProps {\n  onLegendItemHover?: (e: any) => void;\n  onLegendItemUnHover?: (e: any) => void;\n  onLegendItemClick?: (e: any) => void;\n  onLegendFilter?: (e: any) => void;\n  onLegendSelectedDataChange?: (e: any) => void;\n}\n\nexport interface BrushEventProps {\n  onBrushStart?: (e: any) => void;\n  onBrushChange?: (e: any) => void;\n  onBrushEnd?: (e: any) => void;\n}\n\nexport interface DataZoomEventProps {\n  onDataZoomChange?: (e: any) => void;\n}\n\nexport interface PlayerEventProps {\n  onPlayerPlay?: (e: any) => void;\n  onPlayerPause?: (e: any) => void;\n  onPlayerEnd?: (e: any) => void;\n  onPlayerChange?: (e: any) => void;\n  onPlayerForward?: (e: any) => void;\n  onPlayerBackward?: (e: any) => void;\n}\n\nexport interface ScrollBarEventProps {\n  onScrollBarChange?: (e: any) => void;\n}\n\nexport interface DimensionEventProps {\n  onDimensionHover?: (e: any) => void;\n  onDimensionClick?: (e: any) => void;\n}\n\nexport interface HierarchyEventProps {\n  onDrill?: (e: any) => void;\n}\n\nexport interface ChartLifeCycleEventProps {\n  onInitialized?: (e: any) => void;\n  onRendered?: (e: any) => void;\n  onRenderFinished?: (e: any) => void;\n  onAnimationFinished?: (e: any) => void;\n  onLayoutStart?: (e: any) => void;\n  onLayoutEnd?: (e: any) => void;\n}\n\nexport interface EventsProps {\n  onPointerDown?: EventCallback<EventParamsDefinition['pointerdown']>;\n  onPointerUp?: EventCallback<EventParamsDefinition['pointerup']>;\n  onPointerUpOutside?: EventCallback<EventParamsDefinition['pointerupoutside']>;\n  onPointerTap?: EventCallback<EventParamsDefinition['pointertap']>;\n  onPointerOver?: EventCallback<EventParamsDefinition['pointerover']>;\n  onPointerMove?: EventCallback<EventParamsDefinition['pointermove']>;\n  onPointerEnter?: EventCallback<EventParamsDefinition['pointerenter']>;\n  onPointerLeave?: EventCallback<EventParamsDefinition['pointerleave']>;\n  onPointerOut?: EventCallback<EventParamsDefinition['pointerout']>;\n  onMouseDown?: EventCallback<EventParamsDefinition['mousedown']>;\n  onMouseUp?: EventCallback<EventParamsDefinition['mouseup']>;\n  onMouseUpOutside?: EventCallback<EventParamsDefinition['mouseupoutside']>;\n  onMouseMove?: EventCallback<EventParamsDefinition['mousemove']>;\n  onMouseOver?: EventCallback<EventParamsDefinition['mouseover']>;\n  onMouseOut?: EventCallback<EventParamsDefinition['mouseout']>;\n  onMouseEnter?: EventCallback<EventParamsDefinition['mouseenter']>;\n  onMouseLeave?: EventCallback<EventParamsDefinition['mouseleave']>;\n  onPinch?: EventCallback<EventParamsDefinition['pinch']>;\n  onPinchStart?: EventCallback<EventParamsDefinition['pinchstart']>;\n  onPinchEnd?: EventCallback<EventParamsDefinition['pinchend']>;\n  onPan?: EventCallback<EventParamsDefinition['pan']>;\n  onPanStart?: EventCallback<EventParamsDefinition['panstart']>;\n  onPanEnd?: EventCallback<EventParamsDefinition['panend']>;\n  onDrag?: EventCallback<EventParamsDefinition['drag']>;\n  onDragStart?: EventCallback<EventParamsDefinition['dragstart']>;\n  onDragEnter?: EventCallback<EventParamsDefinition['dragenter']>;\n  onDragLeave?: EventCallback<EventParamsDefinition['dragleave']>;\n  onDragOver?: EventCallback<EventParamsDefinition['dragover']>;\n  onDragEnd?: EventCallback<EventParamsDefinition['dragend']>;\n  onRightDown?: EventCallback<EventParamsDefinition['rightdown']>;\n  onRightUp?: EventCallback<EventParamsDefinition['rightup']>;\n  onRightUpOutside?: EventCallback<EventParamsDefinition['rightupoutside']>;\n  onTouchStart?: EventCallback<EventParamsDefinition['touchstart']>;\n  onTouchEnd?: EventCallback<EventParamsDefinition['touchend']>;\n  onTouchEndOutside?: EventCallback<EventParamsDefinition['touchendoutside']>;\n  onTouchMove?: EventCallback<EventParamsDefinition['touchmove']>;\n  onTouchCancel?: EventCallback<EventParamsDefinition['touchcancel']>;\n  onPress?: EventCallback<EventParamsDefinition['press']>;\n  onPressUp?: EventCallback<EventParamsDefinition['pressup']>;\n  onPressEnd?: EventCallback<EventParamsDefinition['pressend']>;\n  onSwipe?: EventCallback<EventParamsDefinition['swipe']>;\n  onDrop?: EventCallback<EventParamsDefinition['drop']>;\n  onWeel?: EventCallback<EventParamsDefinition['weel']>;\n  onClick?: EventCallback<EventParamsDefinition['click']>;\n  onDblClick?: EventCallback<EventParamsDefinition['dblclick']>;\n\n  // @since 1.13.0\n  onPointerDownFilter?: EventFilter;\n  onPointerUpFilter?: EventFilter;\n  onPointerUpOutsideFilter?: EventFilter;\n  onPointerTapFilter?: EventCallback<EventParamsDefinition['pointertap']>;\n  onPointerOverFilter?: EventCallback<EventParamsDefinition['pointerover']>;\n  onPointerMoveFilter?: EventFilter;\n  onPointerEnterFilter?: EventFilter;\n  onPointerLeaveFilter?: EventFilter;\n  onPointerOutFilter?: EventFilter;\n  onMouseDownFilter?: EventFilter;\n  onMouseUpFilter?: EventFilter;\n  onMouseUpOutsideFilter?: EventFilter;\n  onMouseMoveFilter?: EventFilter;\n  onMouseOverFilter?: EventFilter;\n  onMouseOutFilter?: EventFilter;\n  onMouseEnterFilter?: EventFilter;\n  onMouseLeaveFilter?: EventFilter;\n  onPinchFilter?: EventFilter;\n  onPinchStartFilter?: EventFilter;\n  onPinchEndFilter?: EventFilter;\n  onPanFilter?: EventFilter;\n  onPanStartFilter?: EventFilter;\n  onPanEndFilter?: EventFilter;\n  onDragFilter?: EventFilter;\n  onDragStartFilter?: EventFilter;\n  onDragEnterFilter?: EventFilter;\n  onDragLeaveFilter?: EventFilter;\n  onDragOverFilter?: EventFilter;\n  onDragEndFilter?: EventFilter;\n  onRightDownFilter?: EventFilter;\n  onRightUpFilter?: EventFilter;\n  onRightUpOutsideFilter?: EventFilter;\n  onTouchStartFilter?: EventFilter;\n  onTouchEndFilter?: EventFilter;\n  onTouchEndOutsideFilter?: EventFilter;\n  onTouchMoveFilter?: EventFilter;\n  onTouchCancelFilter?: EventFilter;\n  onPressFilter?: EventFilter;\n  onPressUpFilter?: EventFilter;\n  onPressEndFilter?: EventFilter;\n  onSwipeFilter?: EventFilter;\n  onDropFilter?: EventFilter;\n  onWeelFilter?: EventFilter;\n  onClickFilter?: EventFilter;\n  onDblClickFilter?: EventFilter;\n}\n\nexport const REACT_TO_VCHART_EVENTS = {\n  onPointerDown: 'pointerdown',\n  onPointerUp: 'pointerup',\n  onPointerUpOutside: 'pointerupoutside',\n  onPointerTap: 'pointertap',\n  onPointerOver: 'pointerover',\n  onPointerMove: 'pointermove',\n  onPointerEnter: 'pointerenter',\n  onPointerLeave: 'pointerleave',\n  onPointerOut: 'pointerout',\n  onMouseDown: 'mousedown',\n  onMouseUp: 'mouseup',\n  onMouseUpOutside: 'mouseupoutside',\n  onMouseMove: 'mousemove',\n  onMouseOver: 'mouseover',\n  onMouseOut: 'mouseout',\n  onMouseEnter: 'mouseenter',\n  onMouseLeave: 'mouseleave',\n  onPinch: 'pinch',\n  onPinchStart: 'pinchstart',\n  onPinchEnd: 'pinchend',\n  onPan: 'pan',\n  onPanStart: 'panstart',\n  onPanEnd: 'panend',\n  onDrag: 'drag',\n  onDragStart: 'dragstart',\n  onDragEnter: 'dragenter',\n  onDragLeave: 'dragleave',\n  onDragOver: 'dragover',\n  onDragEnd: 'dragend',\n  onRightDown: 'rightdown',\n  onRightUp: 'rightup',\n  onRightUpOutside: 'rightupoutside',\n  onTouchStart: 'touchstart',\n  onTouchEnd: 'touchend',\n  onTouchEndOutside: 'touchendoutside',\n  onTouchMove: 'touchmove',\n  onTouchCancel: 'touchcancel',\n  onPress: 'press',\n  onPressUp: 'pressup',\n  onPressEnd: 'pressend',\n  onSwipe: 'swipe',\n  onDrop: 'drop',\n  onWeel: 'wheel',\n  onClick: 'click',\n  onDblClick: 'dblclick'\n};\n\nexport const LEGEND_CUSTOMIZED_EVENTS = {\n  onLegendItemHover: 'legendItemHover',\n  onLegendItemUnHover: 'legendItemUnHover',\n  onLegendItemClick: 'legendItemClick',\n  onLegendFilter: 'legendFilter',\n  onLegendSelectedDataChange: 'legendSelectedDataChange'\n};\nexport const BRUSH_CUSTOMIZED_EVENTS = {\n  onBrushStart: 'brushStart',\n  onBrushChange: 'brushChange',\n  onBrushEnd: 'brushEnd',\n  onBrushClear: 'brushClear'\n};\n\nexport const DATAZOOM_CUSTOMIZED_EVENTS = {\n  onDataZoomChange: 'dataZoomChange'\n};\n\nexport const PLAYER_CUSTOMIZED_EVENTS = {\n  onPlayerPlay: 'playerPlay',\n  onPlayerPause: 'playerPause',\n  onPlayerEnd: 'playerEnd',\n  onPlayerChange: 'playerChange',\n  onPlayerForward: 'playerForward',\n  onPlayerBackward: 'playerBackward'\n};\n\nexport const SCROLLBAR_CUSTOMIZED_EVENTS = {\n  onScrollBarChange: 'scrollBarChange'\n};\n\nexport const DIMENSION_EVENTS = {\n  onDimensionHover: 'dimensionHover',\n  onDimensionClick: 'dimensionClick'\n};\n\nexport const HIERARCHY_EVENTS = {\n  onDrill: 'drill'\n};\n\nexport const CHART_LIFECYCLE_EVENTS = {\n  onInitialized: 'initialized',\n  onRendered: 'rendered',\n  onRenderFinished: 'renderFinished',\n  onAnimationFinished: 'animationFinished',\n  onLayoutStart: 'layoutStart',\n  onLayoutEnd: 'layoutEnd'\n};\n\nexport const CHART_EVENTS = {\n  ...LEGEND_CUSTOMIZED_EVENTS,\n  ...BRUSH_CUSTOMIZED_EVENTS,\n  ...PLAYER_CUSTOMIZED_EVENTS,\n  ...DATAZOOM_CUSTOMIZED_EVENTS,\n  ...SCROLLBAR_CUSTOMIZED_EVENTS,\n  ...DIMENSION_EVENTS,\n  ...CHART_LIFECYCLE_EVENTS,\n  ...HIERARCHY_EVENTS,\n  ...REACT_TO_VCHART_EVENTS\n};\n\nexport const CHART_EVENTS_KEYS = Object.keys(CHART_EVENTS).concat(\n  Object.keys(REACT_TO_VCHART_EVENTS).map(evt => `${evt}Filter`)\n);\n\nexport const COMMON_EVENTK_KEYS = Object.keys(REACT_TO_VCHART_EVENTS);\n\nexport const VCHART_TO_REACT_EVENTS = Object.keys(REACT_TO_VCHART_EVENTS).reduce((res: Record<string, string>, key) => {\n  res[(REACT_TO_VCHART_EVENTS as Record<string, string>)[key]] = key;\n\n  return res;\n}, {});\n\nexport const findEventProps = <T extends EventsProps>(\n  props: T,\n  supportedEvents: Record<string, string> = REACT_TO_VCHART_EVENTS\n): EventsProps => {\n  const result: EventsProps = {};\n\n  Object.keys(props).forEach(key => {\n    if (supportedEvents[key] && (props as any)[key]) {\n      (result as any)[key] = (props as any)[key];\n    }\n  });\n\n  return result;\n};\n\nexport const bindEventsToChart = <T>(\n  chart: IVChart,\n  newProps?: T | null,\n  prevProps?: T | null,\n  supportedEvents: Record<string, string> = REACT_TO_VCHART_EVENTS\n) => {\n  if ((!newProps && !prevProps) || !chart) {\n    return false;\n  }\n\n  const prevEventProps = prevProps ? findEventProps(prevProps, supportedEvents) : null;\n  const newEventProps = newProps ? findEventProps(newProps, supportedEvents) : null;\n\n  if (prevEventProps) {\n    Object.keys(prevEventProps).forEach(eventKey => {\n      if (\n        !newEventProps ||\n        !(newEventProps as any)[eventKey] ||\n        (newEventProps as any)[eventKey] !== (prevEventProps as any)[eventKey]\n      ) {\n        const res = chart.off(supportedEvents[eventKey], (prevEventProps as any)[eventKey]);\n      }\n    });\n  }\n\n  if (newEventProps) {\n    Object.keys(newEventProps).forEach(eventKey => {\n      if (\n        !prevEventProps ||\n        !(prevEventProps as any)[eventKey] ||\n        (prevEventProps as any)[eventKey] !== (newEventProps as any)[eventKey]\n      ) {\n        const filter = (newProps as any)[`${eventKey}Filter`];\n\n        if (filter) {\n          chart.on(supportedEvents[eventKey], filter, (newEventProps as any)[eventKey]);\n        } else {\n          chart.on(supportedEvents[eventKey], (newEventProps as any)[eventKey]);\n        }\n      }\n    });\n  }\n\n  return true;\n};\n"]}