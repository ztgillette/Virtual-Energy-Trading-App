{"version":3,"sources":["../src/radio/radio.ts"],"names":[],"mappings":"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","file":"radio.js","sourcesContent":["import { merge } from '@visactor/vutils';\nimport { AbstractComponent } from '../core/base';\nimport type { RadioAttributes } from './type';\nimport { Arc, Text } from '@visactor/vrender-core';\nimport type { ComponentOptions } from '../interface';\nimport { loadRadioComponent } from './register';\n\nloadRadioComponent();\nexport class Radio extends AbstractComponent<Required<RadioAttributes>> {\n  static defaultAttributes: Partial<RadioAttributes> = {\n    interactive: true,\n    disabled: false,\n    checked: false,\n    cursor: 'pointer',\n    disableCursor: 'not-allowed',\n    spaceBetweenTextAndIcon: 8,\n    text: {\n      text: 'text',\n      fontSize: 14,\n      fill: '#000',\n      disableFill: 'rgb(201,205,212)',\n      textBaseline: 'top',\n      pickable: false\n    },\n    circle: {\n      outerRadius: 7,\n      innerRadius: 3,\n      startAngle: 0,\n      endAngle: 2 * Math.PI,\n      lineWidth: 1,\n      fill: '#fff',\n      stroke: 'rgb(229,230,235)',\n      disableFill: 'rgb(242,243,245)',\n      checkedFill: 'rgb(22, 93, 255)',\n      checkedStroke: 'rgb(22, 93, 255)',\n      disableCheckedFill: 'rgb(148, 191, 255)',\n      disableCheckedStroke: 'rgb(148, 191, 255)',\n      pickable: false\n    }\n  };\n  _circle: Arc;\n  _text: Text;\n\n  name: 'radio';\n\n  constructor(attributes: RadioAttributes, options?: ComponentOptions) {\n    super(options?.skipDefault ? attributes : merge({}, Radio.defaultAttributes, attributes));\n    this.renderGroup();\n\n    this.onBeforeAttributeUpdate = (val: any, attributes: any, key: null | string | string[]) => {\n      if ('interactive' in val) {\n        this.setAttribute('pickable', val.interactive);\n      }\n      if ('disabled' in val) {\n        this.setAttribute('cursor', val.disable ? this.attribute.disableCursor : this.attribute.cursor);\n      }\n      return undefined;\n    };\n\n    this.addEventListener('pointerup', this._handlePointerUp);\n  }\n\n  render() {\n    this.removeAllChild(true);\n\n    this.renderCircle();\n    this.renderText();\n    this.layout();\n  }\n\n  renderCircle() {\n    this._circle = new Arc(merge({}, this.attribute.circle));\n    const isChecked = this.attribute.checked;\n    if (isChecked && this.attribute.disabled) {\n      this._circle.setAttributes({\n        fill: this.attribute.circle.disableCheckedFill,\n        stroke: this.attribute.circle.disableCheckedStroke\n      });\n    } else if (isChecked) {\n      this._circle.setAttributes({\n        fill: this.attribute.circle.checkedFill,\n        stroke: this.attribute.circle.checkedStroke\n      });\n    } else if (this.attribute.disabled) {\n      this._circle.setAttributes({\n        fill: this.attribute.circle.disableFill\n        // stroke: this.attribute.circle.disableFill\n      });\n    }\n    this.appendChild(this._circle);\n  }\n\n  renderText() {\n    this._text = new Text(merge({}, this.attribute.text));\n    if (this.attribute.disabled) {\n      this._text.setAttribute('fill', this.attribute.text.disableFill);\n    }\n    this.appendChild(this._text);\n  }\n\n  renderGroup() {\n    if (!this.attribute.interactive) {\n      this.setAttribute('pickable', false);\n    }\n    if (this.attribute.disabled) {\n      this.setAttribute('cursor', this.attribute.disableCursor);\n    }\n  }\n\n  layout() {\n    const circleHeight = (this.attribute.circle.outerRadius + this.attribute.circle.lineWidth) * 2;\n    const textHeight = this._text.AABBBounds.height();\n    const maxHeight = Math.max(circleHeight, textHeight);\n    const circleY =\n      maxHeight / 2 - circleHeight / 2 + this.attribute.circle.outerRadius + this.attribute.circle.lineWidth;\n    const textY = maxHeight / 2 - textHeight / 2;\n\n    const circleWidth = (this.attribute.circle.outerRadius + this.attribute.circle.lineWidth) * 2;\n    const circleX = this.attribute.circle.outerRadius + this.attribute.circle.lineWidth;\n    const textX = circleWidth + this.attribute.spaceBetweenTextAndIcon;\n\n    this._circle.setAttributes({\n      x: circleX,\n      y: circleY\n    });\n    this._text.setAttributes({\n      x: textX,\n      y: textY\n    });\n  }\n\n  private _handlePointerUp = () => {\n    if (this.attribute.disabled || this.attribute.checked) {\n      // checked do nothing\n      return;\n    }\n    this.setAttribute('checked', true);\n\n    this._dispatchEvent('radio_checked', {\n      eventType: 'radio_checked',\n      target: this\n    });\n\n    this.stage.renderNextFrame();\n  };\n\n  initAttributes(params: RadioAttributes, options?: ComponentOptions) {\n    params = options?.skipDefault ? params : merge({}, Radio.defaultAttributes, params);\n    super.initAttributes(params);\n    this.renderGroup();\n    this.render();\n  }\n}\n"]}