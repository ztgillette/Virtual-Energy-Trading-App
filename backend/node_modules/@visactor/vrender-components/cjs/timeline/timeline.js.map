{"version":3,"sources":["../src/timeline/timeline.ts"],"names":[],"mappings":"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","file":"timeline.js","sourcesContent":["import { isArray, merge } from '@visactor/vutils';\nimport { AbstractComponent } from '../core/base';\nimport { loadTimelineComponent } from './register';\nimport type { TimelineAttrs } from './type';\nimport type { ComponentOptions } from '../interface';\nimport { getTheme, type IGraphicAttribute, type IGroup, type ILine, type IText } from '@visactor/vrender-core';\nimport type { ISymbol } from '@visactor/vrender-core';\n\nloadTimelineComponent();\n\nexport class Timeline extends AbstractComponent<Required<TimelineAttrs>> {\n  name = 'timeline';\n\n  private _line?: ILine;\n  private _activeLine?: ILine;\n  private _symbolGroup?: IGroup;\n  private _labelGroup?: IGroup;\n  private _timesPercent?: number[];\n\n  static defaultAttributes: Partial<TimelineAttrs> = {\n    labelSpace: 10,\n    pointLayoutMode: 'space-around',\n    animation: true,\n    symbolStyle: {\n      fill: 'black',\n      size: 12,\n      symbolType: 'circle'\n    },\n    activeSymbolStyle: {\n      fill: 'orange',\n      size: 16\n    },\n    lineStyle: {\n      lineDash: [2, 2],\n      lineCap: 'butt',\n      stroke: 'black',\n      lineWidth: 2\n    },\n    activeLineStyle: {\n      stroke: 'orange',\n      lineWidth: 4\n    },\n    labelStyle: {\n      fontSize: 12,\n      fill: 'black',\n      textAlign: 'center',\n      textBaseline: 'top'\n    },\n    activeLabelStyle: {\n      fontSize: 14,\n      fill: 'orange'\n    },\n    clipRange: 0\n  };\n\n  constructor(attributes: TimelineAttrs, options?: ComponentOptions) {\n    super(options?.skipDefault ? attributes : merge({}, Timeline.defaultAttributes, attributes));\n  }\n\n  protected render(): void {\n    const {\n      width,\n      lineStyle,\n      activeLineStyle,\n      symbolStyle,\n      activeSymbolStyle,\n      labelStyle,\n      activeLabelStyle,\n      times,\n      pointLayoutMode,\n      labelSpace,\n      clipRange,\n      animation\n    } = this.attribute;\n\n    if (!(times && times.length)) {\n      return;\n    }\n\n    // 计算线段中心的y位置，考虑线宽和symbol宽度\n    const symbolHeight = (isArray(symbolStyle.size) ? symbolStyle.size[1] : symbolStyle.size) || 0;\n    const activeSymbolHeight =\n      (isArray(activeSymbolStyle.size) ? activeSymbolStyle.size[1] : activeSymbolStyle.size) || 0;\n    const lineSymbolHeight = Math.max(\n      lineStyle.lineWidth || 0,\n      activeLineStyle.lineWidth || 0,\n      symbolHeight,\n      activeSymbolHeight\n    );\n    const lineY = lineSymbolHeight / 2;\n    const lineAttr = {\n      y: lineY,\n      points: [\n        { x: 0, y: 0 },\n        { x: width, y: 0 }\n      ]\n    };\n    this._line = this.createOrUpdateChild(\n      'line-axes',\n      {\n        ...lineStyle,\n        ...lineAttr\n      },\n      'line'\n    ) as ILine;\n    this._activeLine = this.createOrUpdateChild(\n      'active-line-axes',\n      {\n        ...activeLineStyle,\n        ...lineAttr,\n        clipRange\n      },\n      'line'\n    ) as ILine;\n\n    const activeWidth = width * clipRange;\n\n    const symbolGroup = this.createOrUpdateChild(\n      'symbol-group',\n      {\n        y: lineY\n      },\n      'group'\n    ) as IGroup;\n    const symbolSpace =\n      times.length === 1\n        ? width\n        : pointLayoutMode === 'space-between'\n        ? width / (times.length - 1)\n        : width / times.length;\n    const symbolStartX = pointLayoutMode === 'space-between' ? 0 : symbolSpace / 2;\n    this._timesPercent = times.map((_, i) => (symbolStartX + symbolSpace * i) / width);\n\n    times.forEach((item, i) => {\n      const x = this._timesPercent[i] * width;\n      symbolGroup.createOrUpdateChild(\n        item.label,\n        {\n          ...symbolStyle,\n          x\n        },\n        'symbol'\n      );\n    });\n    this._symbolGroup = symbolGroup;\n\n    const labelY = lineSymbolHeight + labelSpace;\n    const labelGroup = this.createOrUpdateChild(\n      'label-group',\n      {\n        y: labelY\n      },\n      'group'\n    ) as IGroup;\n\n    times.forEach((item, i) => {\n      const x = this._timesPercent[i] * width;\n      labelGroup.createOrUpdateChild(\n        item.label,\n        {\n          ...labelStyle,\n          x,\n          text: item.label\n        },\n        'text'\n      );\n    });\n    this._labelGroup = labelGroup;\n\n    const setActive = (group: IGroup, activeStyle: Partial<IGraphicAttribute>) => {\n      group.forEachChildren((label: IText) => {\n        if (label.currentStates) {\n          const currentStates = label.currentStates;\n          label.clearStates();\n          label.useStates(currentStates, false);\n        }\n        label.states = {\n          active: activeStyle\n        };\n        if (label.attribute.x <= activeWidth) {\n          label.useStates(['active'], animation);\n        }\n      });\n    };\n\n    setActive(labelGroup, activeLabelStyle);\n    setActive(symbolGroup, activeSymbolStyle);\n  }\n\n  appearAnimate(animateConfig: { duration?: number; easing?: string }) {\n    // 基准时间，line[0, 500], point[100, 600] 100 onebyone, pointNormal[600, 1000] 90+90 onebyone, activeLine[500, 700]\n    // line和activeLine的clipRange\n    const { duration = 1000, easing = 'quadOut' } = animateConfig;\n    const { activeLabelStyle, activeSymbolStyle } = this.attribute;\n    const percent = duration / 1000;\n    const lineDuration = percent * 500;\n    const activeLineDuration = percent * 200;\n    const perSymbolDuration = percent * 100;\n    const perSymbolNormalDuration = percent * 90;\n    const symbolDelay = percent * 100;\n    const symbolNormalDelay = percent * 600;\n    if (this._line) {\n      this._line.setAttributes({ clipRange: 0 });\n      this._line.animate().to({ clipRange: 1 }, lineDuration, easing as any);\n    }\n    if (this._activeLine) {\n      this._activeLine.setAttributes({ opacity: 0 });\n      this._activeLine\n        .animate()\n        .wait(500)\n        .to({ opacity: 1 }, activeLineDuration, easing as any);\n    }\n    if (this._symbolGroup) {\n      const size = this._symbolGroup.count - 1;\n      const delay = percent * (size === 1 ? 0 : (500 - 100) / (size - 1));\n      const delayNormal = percent * (size === 1 ? 0 : (400 - 160) / (size - 1));\n      this._symbolGroup.forEachChildren((symbol: ISymbol, i) => {\n        const originAttrs: Record<string, any> = {};\n        Object.keys(activeSymbolStyle).forEach(k => {\n          originAttrs[k] = (symbol.attribute as any)[k];\n        });\n\n        symbol.setAttributes({ opacity: 0 });\n        symbol\n          .animate()\n          .wait(symbolDelay + delay * i)\n          .to({ opacity: 1 }, perSymbolDuration, easing as any);\n        symbol\n          .animate()\n          .wait(symbolNormalDelay + delayNormal * i)\n          .to({ ...activeSymbolStyle }, perSymbolNormalDuration, easing as any)\n          .to({ ...originAttrs }, perSymbolNormalDuration, easing as any);\n      });\n    }\n    if (this._labelGroup) {\n      const size = this._labelGroup.count - 1;\n      const delay = percent * (size === 1 ? 0 : (500 - 100) / (size - 1));\n      const delayNormal = percent * (size === 1 ? 0 : (400 - 160) / (size - 1));\n      this._labelGroup.forEachChildren((label: IText, i) => {\n        const originAttrs: Record<string, any> = {};\n        Object.keys(activeLabelStyle).forEach(k => {\n          originAttrs[k] = (label.attribute as any)[k];\n        });\n        label.setAttributes({ opacity: 0 });\n        label\n          .animate()\n          .wait(symbolDelay + delay * i)\n          .to({ opacity: 1 }, perSymbolDuration, easing as any);\n        label\n          .animate()\n          .wait(symbolNormalDelay + delayNormal * i)\n          .to({ dy: 10, ...activeLabelStyle }, perSymbolNormalDuration, easing as any)\n          .to({ dy: 0, ...originAttrs }, perSymbolNormalDuration, easing as any);\n      });\n    }\n  }\n\n  goto(flag: 1 | -1, animateConfig: { duration?: number; easing?: string }) {\n    let { clipRange } = this.attribute;\n    const { animation } = this.attribute;\n\n    // 合法性判断\n    if (flag > 0) {\n      if (clipRange >= 1) {\n        return;\n      } else if (clipRange < 0) {\n        clipRange = 0;\n      }\n    } else {\n      if (clipRange <= 0) {\n        return;\n      } else if (clipRange > 1) {\n        clipRange = 1;\n      }\n    }\n\n    if (clipRange !== this.attribute.clipRange) {\n      this.setAttributes({ clipRange });\n    }\n\n    // 判断区间\n    let i = 0;\n    for (; i < this._timesPercent.length; i++) {\n      if (clipRange < this._timesPercent[i]) {\n        break;\n      }\n    }\n\n    const nextClipRange = flag > 0 ? this._timesPercent[i] || 1 : this._timesPercent[i - 1] || 0;\n    if (animation) {\n      const { duration = 1000, easing = 'quadOut' } = animateConfig;\n      // const actDuration =\n      //   (Math.abs(nextClipRange - clipRange) / ((this._timesPercent[i] ?? 1) - (this._timesPercent[i - 1] ?? 0))) *\n      //   duration;\n      this.animate().to({ clipRange: nextClipRange }, duration, easing as any);\n    } else {\n      this.setAttributes({ clipRange: nextClipRange });\n    }\n  }\n\n  forward(animateConfig: { duration?: number; easing?: string }) {\n    this.goto(1, animateConfig);\n  }\n\n  backward(animateConfig: { duration?: number; easing?: string }) {\n    this.goto(-1, animateConfig);\n  }\n}\n"]}