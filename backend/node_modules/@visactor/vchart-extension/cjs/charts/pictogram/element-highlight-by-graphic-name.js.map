{"version":3,"sources":["../src/charts/pictogram/element-highlight-by-graphic-name.ts"],"names":[],"mappings":";;;AAAA,6CAAsG;AACtG,6CAAyC;AAEzC,MAAM,IAAI,GAAG,mCAAmC,CAAC;AAEjD,MAAa,6BAA8B,SAAQ,yBAAgB;IAAnE;;QAEE,SAAI,GAAW,IAAI,CAAC;QAuCpB,gBAAW,GAAG,CAAC,CAAkB,EAAE,EAAE;YACnC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBAC/C,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBACnG,IAAI,WAAW,EAAE;oBACf,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;oBACxC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;iBACrB;aACF;QACH,CAAC,CAAC;QAEF,gBAAW,GAAG,CAAC,CAAkB,EAAE,EAAE;YACnC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBAC/C,IAAI,CAAC,KAAK,EAAE,CAAC;aACd;QACH,CAAC,CAAC;IACJ,CAAC;IApDW,aAAa,CAAC,CAAkB;;QACxC,MAAM,IAAI,GAAG,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,IAAI,0CAAE,IAAI,CAAC;QAC3B,OAAO,CAAC,CAAC,IAAI,CAAC;IAChB,CAAC;IAES,eAAe,CAAC,CAAkB;QAC1C,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,OAAY;QAChB,IAAI,IAAA,cAAK,EAAC,OAAO,CAAC,EAAE;YAClB,OAAO;SACR;QAED,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;QAChE,MAAM,cAAc,GAAG,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC3D,MAAM,iBAAiB,GAAmB,EAAE,CAAC;QAE7C,IAAI,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;;YAC1B,MAAA,CAAC,CAAC,WAAW,EAAE,0CAAE,OAAO,CAAC,CAAC,CAAC,EAAE;gBAC3B,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,EAAE;oBACtB,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC3B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,iBAAiB,EAAE,cAAc,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;QAC7F,WAAW,CAAC,iBAAiB,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;IACzD,CAAC;IAED,KAAK;QACH,MAAM,EAAE,cAAc,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;QAEhE,WAAW,CAAC,uBAAuB,CAAC,IAAI,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;QACrE,WAAW,CAAC,iBAAiB,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;IAC1C,CAAC;;AAvCH,sEAwDC;AAvDQ,kCAAI,GAAW,IAAI,CAAC;AAyDtB,MAAM,qCAAqC,GAAG,GAAG,EAAE;IACxD,gBAAO,CAAC,0BAA0B,CAAC,6BAA6B,CAAC,IAAI,EAAE,6BAA6B,CAAC,CAAC;AACxG,CAAC,CAAC;AAFW,QAAA,qCAAqC,yCAEhD","file":"element-highlight-by-graphic-name.js","sourcesContent":["import { ElementHighlight, Factory, type BaseEventParams, type IMarkGraphic } from '@visactor/vchart';\nimport { isNil } from '@visactor/vutils';\n\nconst type = 'element-highlight-by-graphic-name';\n\nexport class ElementHighlightByGraphicName extends ElementHighlight {\n  static type: string = type;\n  type: string = type;\n\n  protected _filterByName(e: BaseEventParams) {\n    const name = e?.node?.name;\n    return !!name;\n  }\n\n  protected _parseTargetKey(e: BaseEventParams) {\n    return e.node.name;\n  }\n\n  start(itemKey: any) {\n    if (isNil(itemKey)) {\n      return;\n    }\n\n    const { interaction, highlightState, blurState } = this.options;\n    const statedGraphics = interaction.getStatedGraphics(this);\n    const newStatedGraphics: IMarkGraphic[] = [];\n\n    this.getMarks().forEach(m => {\n      m.getGraphics()?.forEach(g => {\n        if (g.name === itemKey) {\n          newStatedGraphics.push(g);\n        }\n      });\n    });\n\n    interaction.updateStates(this, newStatedGraphics, statedGraphics, highlightState, blurState);\n    interaction.setStatedGraphics(this, newStatedGraphics);\n  }\n\n  reset() {\n    const { highlightState, blurState, interaction } = this.options;\n\n    interaction.clearAllStatesOfTrigger(this, highlightState, blurState);\n    interaction.setStatedGraphics(this, []);\n  }\n\n  handleStart = (e: BaseEventParams) => {\n    if (e && e.item && this.isGraphicInMark(e.item)) {\n      const shouldStart = this.options.shouldStart ? this.options.shouldStart(e) : this._filterByName(e);\n      if (shouldStart) {\n        const itemKey = this._parseTargetKey(e);\n        this.start(itemKey);\n      }\n    }\n  };\n\n  handleReset = (e: BaseEventParams) => {\n    if (e && e.item && this.isGraphicInMark(e.item)) {\n      this.reset();\n    }\n  };\n}\n\nexport const registerElementHighlightByGraphicName = () => {\n  Factory.registerInteractionTrigger(ElementHighlightByGraphicName.type, ElementHighlightByGraphicName);\n};\n"]}