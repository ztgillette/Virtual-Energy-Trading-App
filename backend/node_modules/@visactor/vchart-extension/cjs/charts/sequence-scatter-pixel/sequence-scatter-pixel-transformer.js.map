{"version":3,"sources":["../src/charts/sequence-scatter-pixel/sequence-scatter-pixel-transformer.ts"],"names":[],"mappings":";;;AAEA,6CAA8D;AAC9D,mCAA8C;AAC9C,yCAAsC;AAEtC,MAAa,wCAAyC,SAAQ,mCAA+B;IAC3F,aAAa,CAAC,IAAS;;QACrB,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC1B,MAAM,SAAS,GAAG,IAAA,2BAAmB,EAAC,IAA4C,CAAC,CAAC;QAEpF,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,mBAAQ,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAE9B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAErB,IAAI,CAAC,MAAM,GAAG;YACZ;gBACE,IAAI,EAAE,SAAS;gBACf,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,MAAM,EAAE,IAAI,CAAC,MAAM;aACpB;SACF,CAAC;QAEF,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,mCACN,IAAI,CAAC,MAAM,KACd,KAAK,EAAE,SAAS,GACjB,CAAC;YACF,IAAI,CAAC,eAAe,GAAG;gBACrB,QAAQ,EAAE,MAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,QAAQ,mCAAI,IAAI;gBACvC,MAAM,EAAE,QAAQ;aACjB,CAAC;YAEF,IAAI,CAAC,eAAe,GAAG;gBACrB,QAAQ,EAAE,MAAA,MAAA,IAAI,CAAC,MAAM,0CAAE,QAAQ,mCAAI,IAAI;gBACvC,MAAM,EAAE,QAAQ;aACjB,CAAC;SACH;QAED,IAAI,CAAC,IAAI,GAAG;YACV;gBACE,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,QAAQ;aACf;YACD;gBACE,MAAM,EAAE,QAAQ;gBAChB,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE;gBACxB,IAAI,EAAE,QAAQ;aACf;SACF,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG;YAEhB;gBACE,IAAI,EAAE,OAAO;gBACb,SAAS,EAAE,CAAC;gBACZ,KAAK,EAAE;oBACL,CAAC,EAAE,CAAC;oBACJ,CAAC,EAAE,CAAC;oBACJ,KAAK,EAAE,GAAG;oBACV,MAAM,EAAE,GAAG;oBACX,KAAK,EAAE,CAAC,KAAY,EAAE,EAAE,CAAC,KAAK,CAAC,SAAS;oBACxC,MAAM,EAAE,CAAC,CAAC;iBACX;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,SAAS,EAAE,CAAC;gBACZ,KAAK,kBACH,IAAI,EAAE,CAAC,KAAY,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,EACtC,CAAC,EAAE,EAAE,EACL,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EACX,YAAY,EAAE,KAAK,EACnB,SAAS,EAAE,MAAM,EACjB,QAAQ,EAAE,GAAG,EACb,UAAU,EAAE,QAAQ,EACpB,IAAI,EAAE,OAAO,EACb,WAAW,EAAE,GAAG,IACb,MAAA,IAAI,CAAC,SAAS,0CAAE,KAAK,CACzB;aACF;SACF,CAAC;QAEF,IAAI,CAAC,OAAO,GAAG;YACb,OAAO,EAAE,KAAK;SACf,CAAC;QAEF,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;CACF;AAvFD,4FAuFC","file":"sequence-scatter-pixel-transformer.js","sourcesContent":["import { Datum } from '@visactor/vchart/src/typings';\nimport type { ISequenceScatterPixelSpec } from './interface';\nimport { CommonChartSpecTransformer } from '@visactor/vchart';\nimport { processSequenceData } from './utils';\nimport { DATA_KEY } from './constant';\n\nexport class SequenceScatterPixelChartSpecTransformer extends CommonChartSpecTransformer<any> {\n  transformSpec(spec: any): void {\n    super.transformSpec(spec);\n    const dataSpecs = processSequenceData(spec as unknown as ISequenceScatterPixelSpec);\n\n    spec.type = 'common';\n    spec.dataKey = DATA_KEY;\n    spec.data = dataSpecs[0].data;\n\n    spec.width = 300;\n    spec.height = 300;\n    spec.autoFit = false;\n\n    spec.series = [\n      {\n        type: 'scatter',\n        xField: spec.xField,\n        yField: spec.yField\n      }\n    ];\n\n    if (spec.player) {\n      spec.player = {\n        ...spec.player,\n        specs: dataSpecs\n      };\n      spec.animationAppear = {\n        duration: spec.player?.duration ?? 2000,\n        easing: 'linear'\n      };\n\n      spec.animationUpdate = {\n        duration: spec.player?.duration ?? 2000,\n        easing: 'linear'\n      };\n    }\n\n    spec.axes = [\n      {\n        orient: 'left',\n        type: 'linear'\n      },\n      {\n        orient: 'bottom',\n        label: { visible: true },\n        type: 'linear'\n      }\n    ];\n\n    spec.customMark = [\n      // 背景图像\n      {\n        type: 'image',\n        dataIndex: 2,\n        style: {\n          x: 0,\n          y: 0,\n          width: 300,\n          height: 300,\n          image: (datum: Datum) => datum.imageData,\n          zIndex: -1\n        }\n      },\n      {\n        type: 'text',\n        dataIndex: 1,\n        style: {\n          text: (datum: Datum) => datum['inter'],\n          x: 50,\n          y: () => 10,\n          textBaseline: 'top',\n          textAlign: 'left',\n          fontSize: 100,\n          fontWeight: 'bolder',\n          fill: 'black',\n          fillOpacity: 0.2,\n          ...spec.infoLabel?.style\n        }\n      }\n    ];\n\n    spec.tooltip = {\n      visible: false\n    };\n\n    super.transformSpec(spec);\n  }\n}\n"]}