{"version":3,"sources":["../src/charts/3d/plugin.ts"],"names":[],"mappings":";;;AAAA,yDAAsH;AAEtH,6CAAmE;AACnE,iCAAkD;AAElD,MAAa,cAAe,SAAQ,mBAAU;IAK5C;QACE,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAHpB,SAAI,GAAW,gBAAgB,CAAC;IAIzC,CAAC;IAID,MAAM,CAAC,OAA4B,EAAE,SAAc;;QACjD,IAAI,CAAC,KAAK,GAAG,IAAA,gBAAS,EAAC,SAAS,CAAC,CAAC;QAElC,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,MAAM,EAAE,cAAc,EAAE,GAAG,OAAO,CAAC;YACnC,MAAM,KAAK,GAAG,cAAc,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC;YAEtD,KAAK,CAAC,YAAY,mBACb,MAAC,cAAsB,CAAC,OAAO,0CAAE,SAAS,EAC7C,CAAC;SACJ;IACH,CAAC;IAED,iBAAiB,CAAC,OAA4B,EAAE,SAAc,EAAE,YAAsC;QACpG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,OAAO;SACR;QAED,IAAI,IAAA,oBAAa,EAAC,SAAS,CAAC,EAAE;YAC5B,SAAS,CAAC,MAAM,GAAG;gBACjB,IAAI,EAAE,UAAU;aACjB,CAAC;SACH;IACH,CAAC;;AAlCH,wCAmCC;AAlCiB,yBAAU,GAAY,OAAO,CAAC;AAC9B,mBAAI,GAAW,gBAAgB,CAAC;AAmC3C,MAAM,gBAAgB,GAAG,GAAG,EAAE;IACnC,IAAA,4BAAmB,EAAC,cAAc,CAAC,CAAC;IACpC,IAAA,uCAAwB,GAAE,CAAC;IAC3B,IAAA,kCAAmB,GAAE,CAAC;IACtB,IAAA,4CAA6B,GAAE,CAAC;AAClC,CAAC,CAAC;AALW,QAAA,gBAAgB,oBAK3B","file":"plugin.js","sourcesContent":["import { registerDirectionalLight, registerOrthoCamera, registerViewTransform3dPlugin } from '@visactor/vrender-core';\nimport type { IChartPlugin, IChartPluginService, VChartRenderActionSource } from '@visactor/vchart';\nimport { BasePlugin, registerChartPlugin } from '@visactor/vchart';\nimport { is3DAxisChart, is3DChart } from './util';\n\nexport class VChart3dPlugin extends BasePlugin implements IChartPlugin {\n  static readonly pluginType: 'chart' = 'chart';\n  static readonly type: string = 'VChart3dPlugin';\n  readonly type: string = 'VChart3dPlugin';\n\n  constructor() {\n    super(VChart3dPlugin.type);\n  }\n\n  protected _is3d?: boolean;\n\n  onInit(service: IChartPluginService, chartSpec: any) {\n    this._is3d = is3DChart(chartSpec);\n\n    if (this._is3d) {\n      const { globalInstance } = service;\n      const stage = globalInstance.getCompiler().getStage();\n\n      stage.set3dOptions({\n        ...(globalInstance as any)._option?.options3d\n      });\n    }\n  }\n\n  onBeforeInitChart(service: IChartPluginService, chartSpec: any, actionSource: VChartRenderActionSource) {\n    if (!this._is3d) {\n      return;\n    }\n\n    if (is3DAxisChart(chartSpec)) {\n      chartSpec.layout = {\n        type: 'layout3d'\n      };\n    }\n  }\n}\n\nexport const register3DPlugin = () => {\n  registerChartPlugin(VChart3dPlugin);\n  registerDirectionalLight();\n  registerOrthoCamera();\n  registerViewTransform3dPlugin();\n};\n"]}