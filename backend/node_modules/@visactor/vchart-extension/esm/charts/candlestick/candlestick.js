import { CandlestickChartSpecTransformer } from "./candlestick-transformer";

import { registerCandlestickSeries } from "./series/candlestick";

import { BaseChart, Factory, registerMarkTooltipProcessor, registerDimensionTooltipProcessor, registerDimensionEvents, registerDimensionHover, getCartesianDimensionInfo, getDimensionInfoByValue, getCartesianCrosshairRect } from "@visactor/vchart";

import { CANDLESTICK_CHART_TYPE, CANDLESTICK_SERIES_TYPE } from "./series/constant";

export class CandlestickChart extends BaseChart {
    _setModelOption() {
        this._modelOption.getDimensionInfo = getCartesianDimensionInfo, this._modelOption.getDimensionInfoByValue = getDimensionInfoByValue, 
        this._modelOption.getRectByDimensionData = getCartesianCrosshairRect;
    }
}

CandlestickChart.type = CANDLESTICK_CHART_TYPE, CandlestickChart.seriesType = CANDLESTICK_SERIES_TYPE, 
CandlestickChart.transformerConstructor = CandlestickChartSpecTransformer;

export const registerCandlestickChart = () => {
    registerDimensionTooltipProcessor(), registerMarkTooltipProcessor(), registerDimensionEvents(), 
    registerDimensionHover(), registerCandlestickSeries(), Factory.registerChart(CandlestickChart.type, CandlestickChart);
};