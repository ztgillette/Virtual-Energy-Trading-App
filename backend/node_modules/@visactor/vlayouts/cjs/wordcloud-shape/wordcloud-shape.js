"use strict";

Object.defineProperty(exports, "__esModule", {
    value: !0
}), exports.transform = void 0;

const vutils_1 = require("@visactor/vutils"), layout_1 = require("./layout"), transform = (options, upstreamData, parameters) => {
    if (!options.size || (0, vutils_1.isNil)(options.size[0]) || (0, vutils_1.isNil)(options.size[1]) || options.size[0] <= 0 || options.size[1] <= 0) {
        return vutils_1.Logger.getInstance().info("Wordcloud size dimensions must be greater than 0"), 
        [];
    }
    if (options.size = [ Math.ceil(options.size[0]), Math.ceil(options.size[1]) ], options.shape || vutils_1.Logger.getInstance().error("WordcloudShape shape must be specified."), 
    options.text || vutils_1.Logger.getInstance().error("WordcloudShape text must be specified."), 
    options.onBeforeLayout && options.onBeforeLayout(), !upstreamData || 0 === upstreamData.length) return [];
    const layout = new layout_1.Layout(options);
    return layout.layout(upstreamData), layout.unfinished() ? {
        progressive: layout
    } : layout.output();
};

exports.transform = transform;
//# sourceMappingURL=wordcloud-shape.js.map
