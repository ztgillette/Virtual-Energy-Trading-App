{"version":3,"sources":["../src/tree/format.ts"],"names":[],"mappings":"AAEA,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAC9B,KAAwB,EACxB,SAAc,EAAE,EAChB,OAGC,EACI,EAAE;IACP,MAAM,WAAW,GAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,KAAI,CAAC,CAAC;IAE3C,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QACnB,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC,QAAQ,GAAG,CAAC,EAAE;YACtD,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;;oBAC5B,MAAM,IAAI,GAAG;wBACX,MAAM,EAAE,IAAI;wBACZ,MAAM,EAAE,KAAK;wBACb,EAAE,EAAE,IAAI,CAAC,CAAC;wBACV,EAAE,EAAE,IAAI,CAAC,CAAC;wBACV,EAAE,EAAE,KAAK,CAAC,CAAC;wBACX,EAAE,EAAE,KAAK,CAAC,CAAC;wBACX,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,EAAE;qBAChC,CAAC;oBAEF,MAAM,CAAC,IAAI,CAAC,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,EAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE,IAAqB,CAAC,CAAC;oBAEjF,IAAI,MAAA,KAAK,CAAC,QAAQ,0CAAE,MAAM,EAAE;wBAC1B,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;qBAC5C;gBACH,CAAC,CAAC,CAAC;aACJ;SACF;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC","file":"format.js","sourcesContent":["import type { TreeLinkElement, TreeNodeElement } from './interface';\n\nexport const flattenTreeLinks = <T = TreeLinkElement>(\n  nodes: TreeNodeElement[],\n  output: T[] = [],\n  options?: {\n    maxDepth?: number;\n    callback?: (link: TreeLinkElement) => T;\n  }\n): T[] => {\n  const hasMaxDepth = options?.maxDepth >= 0;\n\n  nodes.forEach(node => {\n    if (!hasMaxDepth || node.depth <= options.maxDepth - 1) {\n      if (node.children) {\n        node.children.forEach(child => {\n          const link = {\n            source: node,\n            target: child,\n            x0: node.x,\n            y0: node.y,\n            x1: child.x,\n            y1: child.y,\n            key: `${node.key}~${child.key}`\n          };\n\n          output.push(options?.callback ? options.callback(link) : (link as unknown as T));\n\n          if (child.children?.length) {\n            flattenTreeLinks([child], output, options);\n          }\n        });\n      }\n    }\n  });\n\n  return output;\n};\n"]}