{"version":3,"sources":["../src/component/marker/mark-point/polar-mark-point.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAE,WAAW,EAAE,MAAM,UAAU,CAAC;AACvC,OAAO,EAAE,wBAAwB,EAAE,MAAM,8BAA8B,CAAC;AACxE,OAAO,EAAE,OAAO,EAAE,MAAM,uBAAuB,CAAC;AAChD,OAAO,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAGlD,OAAO,EAAE,gBAAgB,EAAE,MAAM,kBAAkB,CAAC;AAEpD,OAAO,EAAE,SAAS,EAAE,MAAM,oDAAoD,CAAC;AAE/E,MAAM,OAAO,cAAe,SAAQ,aAAa;IAAjD;;QAEE,SAAI,GAAG,iBAAiB,CAAC,cAAc,CAAC;QACxC,SAAI,GAAW,iBAAiB,CAAC,cAAc,CAAC;QAEhD,mBAAc,GAAG,OAAyB,CAAC;IAkC7C,CAAC;IA5BW,kBAAkB;;QAC1B,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;QAC9B,MAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC;QAC5C,MAAM,SAAS,GAAG,MAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,SAAS,mCAAI,KAAK,CAAC;QACjD,MAAM,UAAU,GAAG,WAAW,CAAC,IAAI,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtG,MAAM,MAAM,GAAG;YACb,CAAC,EACC,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,mBAAmB,EAAE,CAAC,CAAC;gBACvD,IAAI,CAAC,eAAgC,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,CAAC;YACnE,CAAC,EACC,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,mBAAmB,EAAE,CAAC,CAAC;gBACvD,IAAI,CAAC,eAAgC,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,CAAC;SACpE,CAAC;QACF,MAAM,KAAK,GAAG,gBAAgB,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;QAE5E,OAAO,EAAE,KAAK,EAAE,CAAC;IACnB,CAAC;IAES,eAAe;QACvB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAY,CAAC;QAC/B,MAAM,OAAO,GAAG;YACd,IAAI,CAAC,kBAAkB,CAAC;gBACtB,EAAE,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC,MAAM,EAAE;gBACzC,EAAE,GAAG,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,KAAK,EAAE;aACxC,CAAC;SACH,CAAC;QACF,OAAO,EAAE,OAAO,EAAE,CAAC;IACrB,CAAC;;AArCM,mBAAI,GAAG,iBAAiB,CAAC,cAAc,CAAC;AAGxC,6BAAc,GAAG,OAAO,CAAC;AAGhB,2BAAY,GAAG;IAC7B,cAAc,EAAE,SAAS;CAC1B,CAAC;AAgCJ,MAAM,CAAC,MAAM,sBAAsB,GAAG,GAAG,EAAE;IACzC,OAAO,CAAC,iBAAiB,CAAC,cAAc,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;IAC/D,wBAAwB,EAAE,CAAC;AAC7B,CAAC,CAAC","file":"polar-mark-point.js","sourcesContent":["import { ComponentTypeEnum } from '../../interface/type';\nimport { polarLayout } from '../utils';\nimport { registerMarkPointAnimate } from '@visactor/vrender-components';\nimport { Factory } from '../../../core/factory';\nimport { BaseMarkPoint } from './base-mark-point';\nimport type { IPolarSeries } from 'src/series';\nimport type { IMarkProcessOptions } from '../interface';\nimport { polarToCartesian } from '@visactor/vutils';\nimport type { CoordinateType } from '../../../typings';\nimport { markPoint } from '../../../theme/builtin/common/component/mark-point';\n\nexport class PolarMarkPoint extends BaseMarkPoint {\n  static type = ComponentTypeEnum.polarMarkPoint;\n  type = ComponentTypeEnum.polarMarkPoint;\n  name: string = ComponentTypeEnum.polarMarkPoint;\n  static coordinateType = 'polar';\n  coordinateType = 'polar' as CoordinateType;\n\n  static readonly builtInTheme = {\n    polarMarkPoint: markPoint\n  };\n\n  protected _computePointsAttr() {\n    const data = this._markerData;\n    const relativeSeries = this._relativeSeries;\n    const autoRange = this._spec?.autoRange ?? false;\n    const polarPoint = polarLayout(data, relativeSeries, relativeSeries, relativeSeries, autoRange)[0][0];\n    const center = {\n      x:\n        this._relativeSeries.getRegion().getLayoutStartPoint().x +\n        (this._relativeSeries as IPolarSeries).angleAxisHelper.center().x,\n      y:\n        this._relativeSeries.getRegion().getLayoutStartPoint().y +\n        (this._relativeSeries as IPolarSeries).angleAxisHelper.center().y\n    };\n    const point = polarToCartesian(center, polarPoint.radius, polarPoint.angle);\n\n    return { point };\n  }\n\n  protected _computeOptions(): IMarkProcessOptions {\n    const spec = this._spec as any;\n    const options = [\n      this._processSpecByDims([\n        { dim: 'radius', specValue: spec.radius },\n        { dim: 'angle', specValue: spec.angle }\n      ])\n    ];\n    return { options };\n  }\n}\n\nexport const registerPolarMarkPoint = () => {\n  Factory.registerComponent(PolarMarkPoint.type, PolarMarkPoint);\n  registerMarkPointAnimate();\n};\n"]}