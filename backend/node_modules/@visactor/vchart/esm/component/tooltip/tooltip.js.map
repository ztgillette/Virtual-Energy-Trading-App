{"version":3,"sources":["../src/component/tooltip/tooltip.ts"],"names":[],"mappings":"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","file":"tooltip.js","sourcesContent":["import { ComponentTypeEnum } from '../interface/type';\nimport type { IModelRenderOption } from '../../model/interface';\nimport type { IRegion } from '../../region/interface';\nimport { BaseComponent } from '../base/base-component';\nimport type { BaseEventParams, EventCallback, EventQuery, EventType } from '../../event/interface';\nimport type { ITooltipHandler, TooltipActiveType } from '../../typings/tooltip';\nimport type { Datum, IPoint, IShowTooltipOption } from '../../typings';\nimport { isMobileLikeMode, isTrueBrowser, isMiniAppLikeMode } from '../../util/env';\nimport type {\n  ITooltip,\n  ITooltipActiveTypeAsKeys,\n  ITooltipSpec,\n  TooltipHandlerParams,\n  TotalMouseEventData\n} from './interface';\nimport { TooltipResult } from './interface/common';\nimport { showTooltip } from './utils/show-tooltip';\nimport { isEmptyPos } from './utils/common';\nimport { isSameDimensionInfo } from '../../event/events/dimension/util/common';\nimport { ChartEvent, Event_Source_Type } from '../../constant/event';\nimport type {\n  DimensionTooltipInfo,\n  GroupTooltipInfo,\n  ITooltipProcessor,\n  MarkTooltipInfo,\n  TooltipInfo\n} from './processor/interface';\nimport { isDimensionInfo, isMarkInfo } from './processor/util';\n// eslint-disable-next-line no-duplicate-imports\nimport { isValid, isNil, array, isNumber, throttle, isObject } from '@visactor/vutils';\nimport { VChart } from '../../core/vchart';\nimport type { TooltipEventParams } from './interface/event';\nimport { Factory } from '../../core/factory';\nimport type { IGraphic } from '@visactor/vrender-core';\nimport { TooltipSpecTransformer } from './tooltip-transformer';\nimport { error } from '../../util';\nimport { DEFAULT_SHOW_DELAY, TooltipHandlerType, TooltipType } from './constant';\nimport { tooltip } from '../../theme/builtin/common/component/tooltip';\n\ntype EventHandlerList = {\n  eventType: EventType;\n  handler: any;\n}[];\n\nexport class Tooltip extends BaseComponent<any> implements ITooltip {\n  protected layoutZIndex: number = 1;\n  static type = ComponentTypeEnum.tooltip;\n  static readonly transformerConstructor = TooltipSpecTransformer;\n  type = ComponentTypeEnum.tooltip;\n  name: string = ComponentTypeEnum.tooltip;\n  readonly transformerConstructor = TooltipSpecTransformer;\n\n  static readonly builtInTheme = {\n    tooltip\n  };\n\n  static specKey = 'tooltip';\n  specKey = 'tooltip';\n\n  layoutType: 'none' = 'none';\n  private _hideTimer?: number;\n  private _outTimer?: number;\n  private _showTimer?: number;\n  private _needInitEventOfTooltip?: boolean;\n  private _enterable: boolean;\n  private _isReleased: boolean = false;\n  /**\n   * 是否正在浏览tooltip内容\n   */\n  private _isEnterTooltip: boolean;\n  protected declare _spec: ITooltipSpec;\n\n  tooltipHandler?: ITooltipHandler;\n\n  processor: ITooltipActiveTypeAsKeys<\n    ITooltipProcessor<MarkTooltipInfo>,\n    ITooltipProcessor<DimensionTooltipInfo>,\n    ITooltipProcessor<GroupTooltipInfo>\n  >;\n\n  private _alwaysShow: boolean = false;\n\n  private _cacheInfo: TooltipInfo | undefined;\n  private _cacheParams: BaseEventParams | undefined;\n  private _cacheActiveType: TooltipActiveType | undefined;\n  private _cacheEnterableRect: { width: number; height: number };\n\n  private _eventList: EventHandlerList = [];\n\n  protected _isTooltipShown: boolean = false;\n\n  protected _clickLock: boolean = false;\n  private _handleMouseMove: (params: BaseEventParams) => void;\n\n  /** 当前是否正在显示 tooltip */\n  isTooltipShown() {\n    return this._isTooltipShown;\n  }\n\n  protected _registerEvent() {\n    /* do nothing */\n  }\n  protected _releaseEvent() {\n    /* do nothing */\n  }\n  onLayoutEnd() {\n    /* do nothing */\n  }\n\n  created() {\n    super.created();\n    this._regions = this._option.getAllRegions();\n    // event\n    this._initEvent();\n  }\n\n  release() {\n    super.release();\n    this._isReleased = true;\n    if (this._hideTimer) {\n      clearTimeout(this._hideTimer);\n    }\n\n    this._eventList.forEach(({ eventType, handler }) => {\n      this.event.off(eventType, handler);\n    });\n    this._eventList = [];\n    this.tooltipHandler?.release?.();\n    this._isTooltipShown = false;\n  }\n\n  beforeRelease() {\n    // 触发事件\n    this.event.emit(ChartEvent.tooltipHide, {\n      tooltip: this,\n      chart: this.getChart()\n    } as unknown as TooltipEventParams);\n    this.event.emit(ChartEvent.tooltipRelease, {\n      tooltip: this,\n      chart: this.getChart()\n    } as unknown as TooltipEventParams);\n  }\n\n  protected _initHandler() {\n    const renderMode = this._spec.renderMode ?? 'html';\n\n    const userTooltipHandler = this._option.globalInstance.getTooltipHandlerByUser();\n    if (userTooltipHandler) {\n      this.tooltipHandler = userTooltipHandler;\n      this._enterable = false;\n    } else {\n      // 构造内部默认 handler\n      const type = renderMode === 'canvas' ? TooltipHandlerType.canvas : TooltipHandlerType.dom;\n      const handlerConstructor = Factory.getComponentPluginInType(type);\n      if (!handlerConstructor) {\n        error('Can not find tooltip handler: ' + type);\n      }\n      const handler = new handlerConstructor();\n      handler.name = `${this._spec.className}-${this._option.globalInstance.id ?? 0}-${this.getSpecIndex()}`;\n      this.pluginService?.load([handler]);\n\n      this.tooltipHandler = handler as unknown as ITooltipHandler;\n\n      if (this._spec.enterable && renderMode === 'html' && this.tooltipHandler) {\n        this._enterable = true;\n        this._needInitEventOfTooltip = true;\n      } else {\n        this._enterable = false;\n      }\n    }\n  }\n\n  protected _initEventOfTooltipContent() {\n    if (!this._needInitEventOfTooltip) {\n      return;\n    }\n\n    const container = this.tooltipHandler.getRootDom?.();\n\n    if (container) {\n      container.addEventListener('pointerenter', () => {\n        if (!this._enterable) {\n          return;\n        }\n        this._isEnterTooltip = true;\n\n        const rect = container.getBoundingClientRect?.();\n        if (rect) {\n          this._cacheEnterableRect = { width: rect.width, height: rect.height };\n        }\n        if (this._outTimer) {\n          clearTimeout(this._outTimer);\n          this._outTimer = null;\n        }\n\n        if (this._showTimer) {\n          clearTimeout(this._showTimer);\n          this._showTimer = null;\n        }\n      });\n\n      container.addEventListener('pointerleave', () => {\n        if (!this._enterable) {\n          return;\n        }\n        this._isEnterTooltip = false;\n\n        if (this._spec.triggerOff === 'none') {\n          return;\n        }\n\n        if (this._cacheEnterableRect) {\n          const newRect = container.getBoundingClientRect?.();\n\n          /**\n           * 这里需要比对width，height，是防止用户在进入到tooltip 的时候做了一些操作，\n           * 导致tooltip的尺寸发生变更，这种情况一般不需要隐藏tooltip\n           */\n          if (\n            newRect &&\n            Object.keys(this._cacheEnterableRect).every(\n              k => (this._cacheEnterableRect as any)[k] === (newRect as any)[k]\n            )\n          ) {\n            this._cacheEnterableRect = null;\n            this._outTimer = setTimeout(\n              this.hideTooltip,\n              this._spec?.showDelay ?? DEFAULT_SHOW_DELAY\n            ) as unknown as number;\n          }\n        }\n      });\n\n      this._needInitEventOfTooltip = false;\n    }\n  }\n\n  protected _initProcessor() {\n    // 初始化 tooltip 类型\n    const activeType = this._spec.activeType;\n\n    this.processor = {};\n\n    (activeType as TooltipActiveType[]).forEach(type => {\n      const instance = Factory.createTooltipProcessor(type, this);\n\n      if (instance) {\n        (this.processor as any)[type] = instance;\n      }\n    });\n  }\n\n  protected _initEvent() {\n    if (this._option.disableTriggerEvent) {\n      return;\n    }\n    const trigger = array(this._spec.trigger ?? 'hover');\n    const triggerOff = array(this._spec.triggerOff);\n    const mode = this._option.mode;\n\n    trigger.forEach(triggerType => {\n      if (triggerType === 'hover') {\n        this._handleMouseMove = this._throttle(this._getMouseMoveHandler(false));\n\n        this._mountEvent('pointermove', { source: 'chart' }, this._handleMouseMove);\n        // 移动端的点按 + 滑动触发\n        if (isMobileLikeMode(mode) || isMiniAppLikeMode(mode)) {\n          this._mountEvent('pointerdown', { source: 'chart' }, this._getMouseMoveHandler(false));\n          this._mountEvent('pointerup', { source: 'window' }, this._getMouseOutHandler(true));\n        }\n        this._mountEvent('pointerleave', { source: 'chart' }, this._getMouseOutHandler(false));\n      } else if (triggerType === 'click') {\n        this._mountEvent('pointertap', { source: 'chart' }, this._getMouseMoveHandler(true));\n        this._mountEvent('pointerup', { source: 'window' }, this._getMouseOutHandler(true));\n      } else if (isObject(triggerType)) {\n        this._mountEvent(\n          triggerType.eventType,\n          { source: triggerType.source ?? 'chart', consume: triggerType.consume },\n          this._getMouseMoveHandler(true)\n        );\n      }\n    });\n    const offEvents = triggerOff.filter(entry => isObject(entry));\n\n    offEvents.forEach(entry => {\n      this._mountEvent(\n        (entry as any).eventType,\n        { source: (entry as any).source ?? 'chart', consume: (entry as any).consume },\n        this._getMouseOutHandler((entry as any).checkOutside ?? false)\n      );\n    });\n\n    if (!trigger.includes('click') && this._spec.lockAfterClick) {\n      this._mountEvent('pointertap', { source: 'chart' }, this._handleClickToLock);\n    }\n  }\n\n  protected _throttle(callback: (...args: any[]) => any): (...args: any[]) => any {\n    let wait: number;\n    if (isNumber(this._spec.throttleInterval)) {\n      wait = this._spec.throttleInterval;\n    } else {\n      if (this._spec.renderMode !== 'html' || !this._spec.transitionDuration) {\n        wait = 10;\n      } else {\n        wait = 50;\n      }\n    }\n    return throttle(callback, wait);\n  }\n\n  protected _mountEvent = (eType: EventType, query: EventQuery, callback: EventCallback<any>) => {\n    this.event.on(eType, query, callback);\n    this._eventList.push({\n      eventType: eType,\n      handler: callback\n    });\n  };\n\n  protected _handleClickToLock = (params: BaseEventParams) => {\n    if (this._clickLock) {\n      this._handleChartMouseOut(params);\n      this._clickLock = false;\n    } else {\n      if (!this._isTooltipShown && !this.tooltipHandler?.isTooltipShown?.()) {\n        return;\n      }\n      this._clickLock = true;\n    }\n  };\n\n  protected _getMouseOutHandler = (needPointerDetection?: boolean) => (params: BaseEventParams) => {\n    if (this._isReleased) {\n      return;\n    }\n    if (this._alwaysShow || this._clickLock) {\n      return;\n    }\n\n    if (!this._isTooltipShown && !this.tooltipHandler?.isTooltipShown?.()) {\n      return;\n    }\n\n    const browserEnv = isTrueBrowser(this._option?.mode);\n    const { clientX, clientY } = params.event as MouseEvent;\n\n    // 当 enterable 为 true，同时鼠标移入 tooltip 时 pointerleave 事件也会触发，所以这里做一个判断\n\n    // 判断鼠标是否在图表范围内\n    if (browserEnv && needPointerDetection && this._isPointerInChart({ x: clientX, y: clientY })) {\n      return;\n    }\n\n    if (this._enterable) {\n      this._outTimer = setTimeout(() => {\n        this._handleChartMouseOut(params);\n      }, this._spec?.showDelay ?? DEFAULT_SHOW_DELAY) as unknown as number;\n    } else {\n      this._handleChartMouseOut(params);\n    }\n  };\n\n  protected _handleChartMouseOut = (params?: BaseEventParams) => {\n    if (this._alwaysShow || this._isReleased || this._isEnterTooltip) {\n      return;\n    }\n\n    if (this._spec.triggerOff !== 'none') {\n      this._hideTooltipByHandler({\n        ...(params as any),\n        tooltip: this\n      });\n\n      if (this._handleMouseMove && (this._handleMouseMove as any).cancel) {\n        // 防止因为throttle，mousemove事件又触发了一遍，导致 tooltip 隐藏失败\n        (this._handleMouseMove as any).cancel();\n      }\n      this._cacheEnterableRect = null;\n      this._cacheInfo = undefined;\n      this._cacheParams = undefined;\n      this._cacheActiveType = undefined;\n    }\n  };\n\n  protected _getMouseMoveHandler = (isClick: boolean) => (params: BaseEventParams) => {\n    if (this._isReleased || this._isEnterTooltip) {\n      return;\n    }\n    if (this._outTimer) {\n      clearTimeout(this._outTimer);\n      this._outTimer = null;\n    }\n\n    if (!this.tooltipHandler) {\n      this._initHandler();\n    }\n\n    if (!this.processor) {\n      this._initProcessor();\n    }\n\n    if (this._alwaysShow) {\n      return;\n    }\n\n    if (this._clickLock) {\n      if (isClick) {\n        this._handleChartMouseOut(params);\n        this._clickLock = false;\n      }\n      return;\n    }\n\n    if (!isClick && this._enterable && this.tooltipHandler?.isTooltipShown?.()) {\n      if (this._showTimer) {\n        clearTimeout(this._showTimer);\n      }\n\n      this._showTimer = setTimeout(() => {\n        this._handleChartMouseMove(params, isClick);\n      }, this._spec?.showDelay ?? DEFAULT_SHOW_DELAY) as unknown as number;\n    } else {\n      this._handleChartMouseMove(params, isClick);\n    }\n  };\n\n  protected _handleChartMouseMove = (params: BaseEventParams, isClick: boolean) => {\n    if (this._isReleased) {\n      return;\n    }\n    /* 获取 tooltip 原始数据 */\n    const mouseEventData = this._getMouseEventData(params);\n    const {\n      tooltipInfo: { dimension: dimensionInfo },\n      ignore: { mark: ignoreMark }\n    } = mouseEventData;\n\n    /** tooltip 是否显示成功 */\n    const success: ITooltipActiveTypeAsKeys<boolean, boolean, boolean> = {\n      mark: false,\n      dimension: false,\n      group: false\n    };\n\n    const supportedTooltip = [TooltipType.group, TooltipType.mark, TooltipType.dimension];\n\n    for (let i = 0, len = supportedTooltip.length; i < len; i++) {\n      const type = supportedTooltip[i];\n      const res = this.processor[type] ? this._showTooltipByMouseEvent(type, mouseEventData, params, isClick) : false;\n\n      if (res) {\n        success[type] = true;\n        break;\n      }\n    }\n\n    /* 如果不是常规情况，进行一些特殊情况tooltip处理 */\n    if (Object.values(success).every(val => !val) && !isEmptyPos(params)) {\n      // 用户手动配置ignore，则继续显示缓存tooltip\n      if (ignoreMark && isMarkInfo(this._cacheInfo)) {\n        success.mark = this._showTooltipByMouseEvent('mark', mouseEventData, params, isClick, true);\n      } else if (isValid(dimensionInfo)) {\n        // 用户没有手动配置ignore的话，默认显示dimension tooltip\n        success.dimension = this._showTooltipByMouseEvent('dimension', mouseEventData, params, isClick);\n      }\n    }\n\n    /* 如果还是不应该显示tooltip，则隐藏上一次tooltip */\n    if (!success.mark && !success.group && (!success.dimension || isNil(dimensionInfo))) {\n      this._handleChartMouseOut(params);\n    } else {\n      this._initEventOfTooltipContent();\n    }\n  };\n\n  /**\n   * 通过鼠标事件触发 tooltip，返回是否成功\n   * @param activeType tooltip 类型\n   * @param mouseEventData tooltip 相关数据\n   * @param params 事件参数\n   * @param useCache 是否直接显示缓存 tooltip\n   * @returns 是否成功执行\n   */\n  protected _showTooltipByMouseEvent = (\n    activeType: TooltipActiveType,\n    mouseEventData: TotalMouseEventData,\n    params: BaseEventParams,\n    isClick: boolean,\n    useCache?: boolean\n  ): boolean => {\n    const processor = this.processor[activeType];\n    // 判断是否应该触发 tooltip\n    if (!processor.shouldHandleTooltip(params, mouseEventData.tooltipInfo[activeType])) {\n      return false;\n    }\n    if (this._hideTimer) {\n      clearTimeout(this._hideTimer);\n    }\n\n    let success: boolean;\n\n    if (useCache) {\n      // 直接显示缓存 tooltip\n      success = !processor.showTooltip(this._cacheInfo as any, params, true);\n    } else {\n      const tooltipInfo = mouseEventData.tooltipInfo[activeType];\n      const isSameAsCache = this._isSameAsCache(tooltipInfo, params, activeType);\n\n      success = !processor.showTooltip(tooltipInfo as any, params, isSameAsCache);\n\n      if (success) {\n        // 成功显示 tooltip，则更新缓存\n        this._cacheInfo = tooltipInfo;\n        this._cacheParams = params;\n        this._cacheActiveType = activeType;\n      }\n    }\n    if (success) {\n      this._isTooltipShown = true;\n      if (isClick && this._spec.lockAfterClick && !this._clickLock) {\n        this._clickLock = true;\n      } else if (Number.isFinite(this._spec.hideTimer)) {\n        // hover 事件，设置默认的定时器，避免out事件不触发的问题\n        this._hideTimer = setTimeout(() => {\n          this._handleChartMouseOut();\n        }, this._spec.hideTimer as number) as unknown as number;\n      }\n    }\n    // 全局唯一 tooltip\n    const vchart = this._option?.globalInstance;\n    if (success && VChart.globalConfig.uniqueTooltip && vchart) {\n      VChart.hideTooltip(vchart.id);\n    }\n    return success;\n  };\n\n  protected _getMouseEventData = (params: BaseEventParams): TotalMouseEventData => {\n    const result: TotalMouseEventData = {\n      tooltipInfo: {},\n      ignore: {}\n    };\n\n    Object.keys(this.processor).forEach(activeType => {\n      const { tooltipInfo, ignore } = this.processor[activeType as TooltipActiveType].getMouseEventData(params);\n      result.tooltipInfo[activeType as TooltipActiveType] = tooltipInfo as any;\n      result.ignore[activeType as TooltipActiveType] = ignore;\n    });\n    return result;\n  };\n\n  protected _hideTooltipByHandler = (params: TooltipHandlerParams): TooltipResult => {\n    if (!this._isTooltipShown && !this.tooltipHandler?.isTooltipShown?.()) {\n      // 如果当前 tooltip 未显示，则提前退出\n      return TooltipResult.success;\n    }\n\n    // 触发事件\n    this.event.emit(ChartEvent.tooltipHide, {\n      ...params,\n      source: Event_Source_Type.chart, // 统一 event 的来源\n      tooltip: this\n    });\n\n    // 删除缓存\n    Object.values(this.processor).forEach((processor: ITooltipProcessor<TooltipInfo>) => {\n      processor.clearCache();\n    });\n\n    // 隐藏 tooltip\n    const handler = this._spec.handler ?? this.tooltipHandler;\n\n    if (handler.hideTooltip) {\n      const result = handler.hideTooltip.call(handler, params);\n      if (!result) {\n        this._isTooltipShown = false;\n      }\n      return result;\n    }\n    return TooltipResult.failed;\n  };\n\n  reInit(spec?: any) {\n    super.reInit(spec);\n\n    if (this.tooltipHandler) {\n      const renderMode = this._spec.renderMode ?? 'html';\n      const newEnterable = this._spec.enterable && renderMode === 'html';\n\n      if (newEnterable && !this._enterable) {\n        this._needInitEventOfTooltip = true;\n      }\n      this._enterable = newEnterable;\n\n      this.tooltipHandler.reInit?.();\n    } else {\n      this._initHandler();\n    }\n  }\n\n  showTooltip(datum: Datum, options: IShowTooltipOption) {\n    if (!this.tooltipHandler) {\n      this._initHandler();\n    }\n\n    if (!this.processor) {\n      this._initProcessor();\n    }\n\n    if (!this.tooltipHandler?.showTooltip) {\n      return false;\n    }\n\n    const result = showTooltip(datum, options, this);\n    if (result !== 'none') {\n      this._alwaysShow = !!options?.alwaysShow;\n    }\n    return result;\n  }\n\n  /** 手动隐藏 tooltip，返回是否成功 */\n  hideTooltip = (): boolean => {\n    if (this._isReleased) {\n      return false;\n    }\n\n    const params: TooltipHandlerParams = {\n      changePositionOnly: false,\n      tooltip: this,\n      item: undefined,\n      datum: undefined,\n      source: Event_Source_Type.chart\n    } as any;\n\n    this._alwaysShow = false;\n    return !this._hideTooltipByHandler(params);\n  };\n\n  private _isSameAsCache(\n    nextInfo?: TooltipInfo,\n    nextParams?: BaseEventParams,\n    nextActiveType?: TooltipActiveType\n  ): boolean {\n    if (nextActiveType !== this._cacheActiveType) {\n      return false;\n    }\n    if (nextInfo === this._cacheInfo) {\n      return true;\n    }\n    if (isNil(this._cacheInfo) || isNil(nextInfo)) {\n      return false;\n    }\n\n    // 判断 tooltip 信息是否一致\n    if (isDimensionInfo(nextInfo)) {\n      if (isMarkInfo(this._cacheInfo)) {\n        return false;\n      }\n\n      const prevInfo = this._cacheInfo as DimensionTooltipInfo;\n      const isSameAsCacheInfo =\n        prevInfo.length === nextInfo.length && nextInfo.every((info, i) => isSameDimensionInfo(info, prevInfo[i]));\n\n      return isSameAsCacheInfo;\n    }\n\n    if (isDimensionInfo(this._cacheInfo)) {\n      return false;\n    }\n\n    const prevInfo = this._cacheInfo as MarkTooltipInfo;\n    const isSameAsCacheInfo =\n      nextInfo?.datum === prevInfo.datum && nextInfo?.mark === prevInfo.mark && nextInfo?.series === prevInfo.series;\n    if (!isSameAsCacheInfo) {\n      return false;\n    }\n\n    // 判断事件触发信息是否一致\n    const prevParams = this._cacheParams;\n    if (isNil(prevParams) || isNil(nextParams)) {\n      return false;\n    }\n    return (\n      prevParams.mark === nextParams.mark &&\n      prevParams.model === nextParams.model &&\n      prevParams.datum === nextParams.datum\n    );\n  }\n\n  private _isPointerInChart(point: IPoint): boolean {\n    const globalInstance = this._option?.globalInstance;\n    if (!globalInstance) {\n      return false;\n    }\n    const chart = globalInstance.getChart();\n    if (!chart) {\n      return false;\n    }\n    const { x, y } = point;\n    const canvas = globalInstance.getCanvas();\n    const { x: chartX, y: chartY, width: chartWidth, height: chartHeight } = canvas.getBoundingClientRect();\n    // 鼠标仍在图表范围内，则不处理\n    if (x >= chartX && x <= chartX + chartWidth && y >= chartY && y <= chartY + chartHeight) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getVisible() {\n    return this._spec.visible !== false;\n  }\n}\n\nexport const registerTooltip = () => {\n  Factory.registerComponent(Tooltip.type, Tooltip);\n};\n"]}