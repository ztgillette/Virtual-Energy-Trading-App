{"version":3,"sources":["../src/series/sunburst/animation/utils.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAC9C,OAAO,EAAE,SAAS,EAAE,MAAM,8BAA8B,CAAC;AAMzD,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,KAAa,EAAE,KAAuB,EAAE,EAAE;IAMrE,MAAM,KAAK,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;IAO9D,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AACzC,CAAC,CAAC;AAKF,MAAM,CAAC,MAAM,oBAAoB,GAAG,CAAC,QAAwB,EAAE,EAAE;IAE/D,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,MAAM,CAAC,CAAC;IAEtF,MAAM,QAAQ,GAAG,UAAU,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,eAAC,OAAA,MAAA,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,OAAO,0CAAE,IAAI,0CAAG,CAAC,EAAE,KAAK,CAAA,EAAA,CAAC,CAAC,CAAC;IAElF,OAAO,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,eAAC,OAAA,CAAA,MAAA,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,OAAO,0CAAE,IAAI,0CAAG,CAAC,EAAE,KAAK,MAAK,QAAQ,CAAA,EAAA,CAAC,CAAC;AAC9E,CAAC,CAAC","file":"utils.js","sourcesContent":["import { minInArray } from '@visactor/vutils';\nimport { DiffState } from '../../../mark/interface/enum';\nimport type { IMarkGraphic } from '../../../mark/interface/common';\n\n/**\n * 计算角度对于起点的比例\n */\nexport const computeRatio = (angle: number, range: [number, number]) => {\n  /**\n   * 计算当前处理的角度, 与range的距离\n   * 若ratio为负, 则代表需要向起点靠拢\n   * 若ratio为正, 则代表需要向终点靠拢\n   */\n  const ratio = (angle - range[0]) / (range[1] - range[0] || 1);\n\n  /**\n   * ratio若为负值, 则取0, 代表起点.\n   * ratio若为正值, 则取1, 代表终点.\n   * Tips: 仅代表一个比例, 具体的值是多少, 需要在外部计算.\n   */\n  return Math.max(0, Math.min(1, ratio));\n};\n\n/**\n * 得到最内层的Elements\n */\nexport const getInnerMostElements = (graphics: IMarkGraphic[]) => {\n  // 所有待更新的marks\n  const updateElements = graphics.filter(g => g.context.diffState === DiffState.update);\n  // 得到最内层级\n  const minDepth = minInArray(updateElements.map(g => g?.context?.data?.[0].depth));\n  // 内层的Marks\n  return updateElements.filter(g => g?.context?.data?.[0].depth === minDepth);\n};\n"]}