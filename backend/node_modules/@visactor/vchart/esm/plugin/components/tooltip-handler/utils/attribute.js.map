{"version":3,"sources":["../src/plugin/components/tooltip-handler/utils/attribute.ts"],"names":[],"mappings":"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","file":"attribute.js","sourcesContent":["import type {\n  TooltipPanelAttrs,\n  TooltipRowAttrs,\n  TooltipRowStyleAttrs,\n  TooltipSymbolAttrs,\n  TooltipTextAttrs,\n  TooltipRichTextAttrs\n} from '@visactor/vrender-components';\nimport type { IPadding, ITooltipActual, MaybeArray } from '../../../../typings';\nimport type { ITooltipAttributes, ITooltipTextStyle } from '../interface';\nimport { isValid, maxInArray, normalizePadding } from '@visactor/vutils';\nimport { mergeSpec } from '@visactor/vutils-extension';\nimport { normalizeLayoutPaddingSpec } from '../../../../util/space';\nimport type { ITheme } from '../../../../theme';\nimport type { ITooltipSpec, ITooltipTextTheme, ITooltipTheme } from '../../../../component/tooltip';\nimport { token } from '../../../../theme/token';\n// eslint-disable-next-line no-duplicate-imports\nimport { getRichTextBounds } from '@visactor/vrender-core';\n// eslint-disable-next-line no-duplicate-imports\nimport type { IRichTextCharacter, IRichTextParagraphCharacter } from '@visactor/vrender-core';\n\nconst DEFAULT_TEXT_ATTRIBUTES: Partial<ITooltipTextStyle> = {\n  fontFamily: token.fontFamily,\n  spacing: 10,\n  wordBreak: 'break-word'\n};\n\ninterface ITooltipTextInfo {\n  width: number;\n  height: number;\n  text: MaybeArray<number> | MaybeArray<string> | TooltipRichTextAttrs;\n}\n\n/** 测量 tooltip 标签文本 */\nexport const measureTooltipText = (text: string | TooltipRichTextAttrs, style: ITooltipTextStyle): ITooltipTextInfo => {\n  let textLines: string[] | TooltipRichTextAttrs;\n  let textConfig: IRichTextCharacter[];\n  if (!((text as TooltipRichTextAttrs)?.type === 'rich' || (text as TooltipRichTextAttrs)?.type === 'html')) {\n    text = (text ?? '').toString();\n    if (style.multiLine) {\n      textLines = text.split('\\n');\n      textLines = textLines.map((line, i) => (i < (textLines as string[]).length - 1 ? line + '\\n' : line));\n    } else {\n      textLines = [text];\n    }\n    textConfig = textLines.map(\n      line =>\n        ({\n          ...style,\n          text: line\n        } as unknown as IRichTextParagraphCharacter)\n    );\n  } else {\n    textConfig = (text as TooltipRichTextAttrs).text as IRichTextCharacter[];\n    textLines = text as TooltipRichTextAttrs;\n  }\n\n  const bound = getRichTextBounds({\n    wordBreak: (style as any).wordBreak ?? 'break-word',\n    maxWidth: style.maxWidth ? style.maxWidth : undefined,\n    width: 0,\n    height: 0,\n    textConfig: textConfig\n  });\n  return {\n    width: bound.width(),\n    height: bound.height(),\n    text: textLines\n  };\n};\n\nexport function getTextAttributes(\n  style: ITooltipTextTheme = {},\n  globalFontFamily?: string,\n  defaultAttributes?: Partial<ITooltipTextStyle>\n): ITooltipTextStyle {\n  const attrs: ITooltipTextStyle = {\n    ...(defaultAttributes ?? DEFAULT_TEXT_ATTRIBUTES),\n    fill: (style.fill ?? style.fontColor) as string,\n    textAlign: style.textAlign,\n    textBaseline: style.textBaseline,\n    fontFamily: style.fontFamily ?? globalFontFamily,\n    fontSize: style.fontSize as number,\n    fontWeight: style.fontWeight,\n    lineHeight: style.lineHeight as number,\n    spacing: style.spacing,\n    multiLine: isValid(style.maxWidth) ? style.multiLine !== false : style.multiLine,\n    maxWidth: style.maxWidth,\n    wordBreak: style.wordBreak,\n    autoWidth: style.autoWidth\n  };\n  return attrs;\n}\n\nexport const getPanelAttributes = (style: ITooltipTheme['panel']): TooltipPanelAttrs => {\n  const { backgroundColor, border, shadow } = style;\n  const panelAttrs: TooltipPanelAttrs = {\n    lineWidth: border?.width ?? 0,\n    shadow: !!shadow\n  };\n  if (border?.color) {\n    panelAttrs.stroke = border.color as string;\n  }\n  if (backgroundColor) {\n    panelAttrs.fill = backgroundColor as string;\n  }\n  if (shadow) {\n    panelAttrs.shadowColor = shadow.color as string;\n    panelAttrs.shadowBlur = shadow.blur;\n    panelAttrs.shadowOffsetX = shadow.x;\n    panelAttrs.shadowOffsetY = shadow.y;\n    panelAttrs.shadowSpread = shadow.spread;\n  }\n  const { radius } = border ?? {};\n  if (isValid(radius)) {\n    panelAttrs.cornerRadius = [radius, radius, radius, radius];\n  }\n  return panelAttrs;\n};\n\nexport const getTooltipAttributes = (\n  actualTooltip: ITooltipActual,\n  spec: ITooltipSpec,\n  globalFontFamily?: string\n): ITooltipAttributes => {\n  const { style = {}, enterable, transitionDuration } = spec;\n  const { panel = {}, titleLabel, shape, keyLabel, valueLabel, spaceRow: commonSpaceRow, align } = style;\n  const padding = normalizePadding(panel.padding);\n  const paddingSpec = normalizeLayoutPaddingSpec(panel.padding) as IPadding;\n\n  const titleStyle = getTextAttributes(\n    {\n      textAlign: align === 'right' ? 'right' : 'left',\n      ...titleLabel\n    },\n    globalFontFamily\n  );\n  const keyStyle = getTextAttributes(\n    {\n      textAlign: align === 'right' ? 'right' : 'left',\n      ...keyLabel\n    },\n    globalFontFamily\n  );\n  const valueStyle = getTextAttributes(valueLabel, globalFontFamily);\n  const shapeStyle: TooltipRowStyleAttrs['shape'] = {\n    fill: true,\n    size: shape?.size ?? 8,\n    spacing: shape?.spacing ?? 6\n  };\n\n  const attributes: ITooltipAttributes = {\n    panel: getPanelAttributes(panel),\n    padding,\n\n    title: {},\n    content: [],\n\n    titleStyle: {\n      value: titleStyle,\n      spaceRow: commonSpaceRow\n    },\n    contentStyle: {\n      shape: shapeStyle,\n      key: keyStyle,\n      value: valueStyle,\n      spaceRow: commonSpaceRow\n    },\n    hasContentShape: false,\n    keyWidth: 0,\n    valueWidth: 0,\n\n    enterable,\n    transitionDuration,\n    align\n  };\n\n  const { title = {}, content = [] } = actualTooltip;\n\n  let panelWidth = paddingSpec.left + paddingSpec.right;\n  let panelHeight = paddingSpec.top + paddingSpec.bottom;\n\n  // calculate content\n  let contentMaxWidth = 0;\n\n  const hasContent = !!content.length;\n  let maxKeyWidth = 0;\n  let maxAdaptiveKeyWidth = 0;\n  let maxValueWidth = 0;\n  let maxShapeWidth = 0;\n\n  if (hasContent) {\n    const keyWidths: number[] = [];\n    const adaptiveKeyWidths: number[] = [];\n    const valueWidths: number[] = [];\n    const shapeWidths: number[] = [];\n\n    let contentHeight = 0;\n    attributes.content = content.map((item, i) => {\n      let itemHeight = 0;\n      const {\n        hasShape: actualHasShape,\n        key: actualKey,\n        shapeType: actualShapeType = '',\n        shapeFill: actualShapeFill,\n        shapeStroke: actualShapeStroke,\n        shapeLineWidth: actualShapeLineWidth,\n        shapeSize: actualShapeSize,\n        value: actualValue,\n        isKeyAdaptive: actualIsKeyAdaptive,\n        spaceRow: actualSpaceRow,\n        keyStyle: actualKeyStyle,\n        valueStyle: actualValueStyle,\n        shapeHollow: actualShapeHollow\n      } = item;\n      const itemAttrs: TooltipRowAttrs = { height: 0, spaceRow: actualSpaceRow ?? commonSpaceRow };\n      if (isValid(actualKey)) {\n        const itemKeyStyle: ITooltipTextStyle = mergeSpec(\n          {},\n          keyStyle,\n          getTextAttributes(actualKeyStyle, undefined, {})\n        );\n        const { width, height, text } = measureTooltipText(actualKey, itemKeyStyle);\n        itemAttrs.key = {\n          width,\n          height,\n          ...itemKeyStyle,\n          text\n        };\n        if (!actualIsKeyAdaptive) {\n          keyWidths.push(width);\n        } else {\n          adaptiveKeyWidths.push(width);\n        }\n        itemHeight = Math.max(itemHeight, height);\n      }\n      if (isValid(actualValue)) {\n        const itemValueStyle: ITooltipTextStyle = mergeSpec(\n          {},\n          valueStyle,\n          getTextAttributes(actualValueStyle, undefined, {})\n        );\n        const { width, height, text } = measureTooltipText(actualValue, itemValueStyle);\n        itemAttrs.value = {\n          width,\n          height,\n          ...itemValueStyle,\n          text\n        };\n        valueWidths.push(width);\n        itemHeight = Math.max(itemHeight, height);\n      }\n      if (actualHasShape) {\n        const shape: TooltipSymbolAttrs = {\n          visible: true,\n          symbolType: actualShapeType\n        };\n        if (actualShapeHollow) {\n          shape.stroke = actualShapeFill;\n        } else {\n          shape.fill = actualShapeFill;\n        }\n        shape.stroke = actualShapeStroke ?? actualShapeFill;\n        shape.lineWidth = actualShapeLineWidth;\n        itemAttrs.shape = shape;\n\n        const shapeWidth = actualShapeSize ?? shapeStyle.size;\n        itemHeight = Math.max(shapeWidth, itemHeight);\n        shapeWidths.push(shapeWidth);\n      } else {\n        itemAttrs.shape = { visible: false };\n      }\n\n      itemAttrs.height = itemHeight;\n      contentHeight += itemHeight;\n      if (i < content.length - 1) {\n        contentHeight += itemAttrs.spaceRow;\n      }\n\n      return itemAttrs;\n    });\n    panelHeight += contentHeight;\n\n    maxKeyWidth = keyWidths.length ? maxInArray(keyWidths) : 0; // name 需要对齐\n    maxAdaptiveKeyWidth = adaptiveKeyWidths.length ? maxInArray(adaptiveKeyWidths) : 0;\n    maxValueWidth = valueWidths.length ? maxInArray(valueWidths) : 0; // value 需要对齐\n    maxShapeWidth = shapeWidths.length ? maxInArray(shapeWidths) + shapeStyle.spacing : 0; // shape 列宽度\n    contentMaxWidth = Math.max(\n      maxShapeWidth + maxKeyWidth + keyStyle.spacing + maxValueWidth + valueStyle.spacing,\n      maxShapeWidth + maxAdaptiveKeyWidth,\n      contentMaxWidth\n    );\n    attributes.hasContentShape = !!shapeWidths.length;\n    attributes.keyWidth = maxKeyWidth;\n    attributes.valueWidth = maxValueWidth;\n  }\n\n  // calculate title\n  let titleMaxWidth = 0;\n  let titleMaxHeight = 0;\n  let titleHeightWithSpace = 0;\n  const {\n    visible: actualTitleVisible = true,\n    value: actualTitleValue = '',\n    valueStyle: actualTitleValueStyle,\n    spaceRow: actualTitleSpaceRow\n  } = title;\n  attributes.title.visible = actualTitleVisible;\n  attributes.title.spaceRow = actualTitleSpaceRow ?? commonSpaceRow;\n\n  let titleValueStyle: ITooltipTextStyle = {};\n  // 当前是否处于自适应宽度模式\n  const isAutoWidthMode = () => titleValueStyle.autoWidth && titleValueStyle.multiLine !== false;\n  if (actualTitleVisible) {\n    titleValueStyle = mergeSpec({}, titleStyle, getTextAttributes(actualTitleValueStyle, undefined, {}));\n    // 标题默认优化策略：如果 autoWidth 为 true，则宽度默认跟随 content 宽度并开启自动换行\n    if (isAutoWidthMode()) {\n      titleValueStyle.multiLine = titleValueStyle.multiLine ?? true;\n      titleValueStyle.maxWidth = titleValueStyle.maxWidth ?? (hasContent ? Math.ceil(contentMaxWidth) : undefined);\n    }\n\n    const { text, width, height } = measureTooltipText(actualTitleValue, titleValueStyle);\n    attributes.title.value = {\n      width: isAutoWidthMode() ? Math.min(width, titleValueStyle.maxWidth ?? Number.MAX_VALUE) : width,\n      height,\n      ...titleValueStyle,\n      text\n    };\n    titleMaxWidth = attributes.title.value.width;\n    titleMaxHeight = attributes.title.value.height;\n\n    titleHeightWithSpace = titleMaxHeight + (hasContent ? attributes.title.spaceRow : 0);\n  }\n  panelHeight += titleHeightWithSpace;\n  attributes.title.width = titleMaxWidth;\n  attributes.title.height = titleMaxHeight;\n\n  if (isAutoWidthMode()) {\n    panelWidth += contentMaxWidth ? contentMaxWidth : titleMaxWidth;\n  } else {\n    panelWidth += Math.max(titleMaxWidth, contentMaxWidth);\n  }\n\n  // 处理 content 的自动宽度模式\n  if (hasContent) {\n    attributes.content.forEach(item => {\n      const value = item.value as ITooltipTextStyle & TooltipTextAttrs;\n      // 最后一列默认自适应宽度\n      if (value && (value.autoWidth ?? true)) {\n        value.width =\n          panelWidth -\n          paddingSpec.left -\n          paddingSpec.right -\n          maxShapeWidth -\n          maxKeyWidth -\n          keyStyle.spacing -\n          valueStyle.spacing;\n        //value.multiLine = true;  multiLine 需要用户手动开启，不会自动开启\n        if (!value.maxWidth) {\n          value.maxWidth = Math.ceil(value.width);\n        }\n        attributes.valueWidth = Math.max(attributes.valueWidth, value.width);\n      }\n    });\n  }\n\n  attributes.panel.width = panelWidth;\n  attributes.panel.height = panelHeight;\n  return attributes;\n};\n"]}