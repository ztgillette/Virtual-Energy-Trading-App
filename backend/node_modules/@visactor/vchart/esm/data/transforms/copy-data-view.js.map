{"version":3,"sources":["../src/data/transforms/copy-data-view.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAE9C,SAAS,eAAe,CAAC,CAAW,EAAE,IAAI,GAAG,KAAK;IAChD,IAAI,KAAK,GAAG,IAAI,CAAC;IACjB,IAAI,CAAC,CAAC,UAAU,YAAY,QAAQ,EAAE;QACpC,KAAK,GAAG,KAAK,CAAC;KACf;IACD,IAAI,KAAK,EAAE;QACT,OAAO,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;KAChC;IAED,OAAO,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;AAC9C,CAAC;AAQD,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,IAAqB,EAAE,OAA6B,EAAE,EAAE;IACnF,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;QACrB,OAAO,EAAE,CAAC;KACX;IACD,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;QACrB,OAAO,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAC,CAAC;KAChD;IACD,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAC,CAAC,CAAC;AAC1D,CAAC,CAAC","file":"copy-data-view.js","sourcesContent":["import { cloneDeep } from '@visactor/vutils';\nimport { DataView } from '@visactor/vdataset';\n\nfunction copyOneDataView(d: DataView, deep = false) {\n  let _deep = deep;\n  if (d.latestData instanceof DataView) {\n    _deep = false;\n  }\n  if (_deep) {\n    return cloneDeep(d.latestData);\n  }\n\n  return d.latestData && d.latestData.slice();\n}\n\n/**\n * 聚合统计主要用于处理数据(诸如统计平均值,求和等),并返回计算后的数据结果\n * @param data\n * @param options\n * @returns\n */\nexport const copyDataView = (data: Array<DataView>, options?: ICopyDataViewOption) => {\n  if (data.length === 0) {\n    return [];\n  }\n  if (data.length === 1) {\n    return copyOneDataView(data[0], options?.deep);\n  }\n  return data.map(d => copyOneDataView(d, options?.deep));\n};\n\nexport interface ICopyDataViewOption {\n  deep?: boolean;\n}\n"]}