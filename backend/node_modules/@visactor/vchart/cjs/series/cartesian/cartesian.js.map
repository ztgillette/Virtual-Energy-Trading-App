{"version":3,"sources":["../src/series/cartesian/cartesian.ts"],"names":[],"mappings":"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","file":"cartesian.js","sourcesContent":["import type { ICartesianSeries } from '../interface';\nimport { BaseSeries } from '../base/base-series';\nimport type { IPoint } from '../../typings/coordinate';\nimport type { IBaseScale } from '@visactor/vscale';\nimport {\n  STACK_FIELD_END,\n  STACK_FIELD_END_PERCENT,\n  STACK_FIELD_END_OffsetSilhouette,\n  STACK_FIELD_START,\n  STACK_FIELD_START_PERCENT,\n  STACK_FIELD_START_OffsetSilhouette\n} from '../../constant/data';\nimport type { IAxisHelper } from '../../component/axis/cartesian/interface';\nimport type { DirectionType } from '../../typings/space';\n// eslint-disable-next-line no-duplicate-imports\nimport { Direction } from '../../typings/space';\nimport type { Datum, StringOrNumber } from '../../typings';\nimport { array, isValid } from '@visactor/vutils';\n// eslint-disable-next-line no-duplicate-imports\nimport { isContinuous } from '@visactor/vscale';\nimport type { ICartesianSeriesSpec } from './interface';\nimport { sortDataInAxisHelper } from '../util/utils';\nimport type { IAxisLocationCfg } from '../../component/axis';\nimport { ComponentTypeEnum } from '../../component/interface/type';\nimport { ChartEvent } from '../../constant/event';\nimport { PREFIX } from '../../constant/base';\nimport type { StatisticOperations } from '../../data/transforms/interface';\n\nexport abstract class CartesianSeries<T extends ICartesianSeriesSpec = ICartesianSeriesSpec>\n  extends BaseSeries<T>\n  implements ICartesianSeries\n{\n  readonly coordinate: 'cartesian' = 'cartesian';\n  protected _bandPosition = 0.5;\n  protected _scaleConfig: IAxisLocationCfg = {\n    bandPosition: this._bandPosition\n  };\n  protected _buildScaleConfig() {\n    this._scaleConfig = {\n      bandPosition: this._bandPosition\n    };\n  }\n\n  protected _fieldX!: string[];\n  get fieldX() {\n    return this._fieldX;\n  }\n  setFieldX(f: string | string[]) {\n    this._fieldX = array(f);\n  }\n\n  protected _fieldY!: string[];\n  get fieldY() {\n    return this._fieldY;\n  }\n  setFieldY(f: string | string[]) {\n    this._fieldY = array(f);\n  }\n\n  protected _fieldZ?: string[];\n  get fieldZ(): string[] | undefined {\n    return this._fieldZ;\n  }\n  setFieldZ(f?: string | string[]) {\n    this._fieldZ = f && array(f);\n  }\n\n  protected _fieldX2!: string;\n  get fieldX2() {\n    return this._fieldX2;\n  }\n  setFieldX2(f: string) {\n    this._fieldX2 = f;\n  }\n\n  protected _fieldY2!: string;\n  get fieldY2() {\n    return this._fieldY2;\n  }\n  setFieldY2(f: string) {\n    this._fieldY2 = f;\n  }\n\n  protected _specXField: string[];\n  protected _specYField: string[];\n\n  protected _direction: DirectionType = Direction.vertical;\n  get direction() {\n    return this._direction;\n  }\n\n  protected _scaleX!: IBaseScale;\n  get scaleX() {\n    return this._scaleX;\n  }\n  setScaleX(s: IBaseScale) {\n    this._scaleX = s;\n  }\n\n  protected _scaleY!: IBaseScale;\n  get scaleY() {\n    return this._scaleY;\n  }\n  setScaleY(s: IBaseScale) {\n    this._scaleY = s;\n  }\n\n  protected _scaleZ?: IBaseScale;\n  get scaleZ() {\n    return this._scaleZ;\n  }\n  setScaleZ(s: IBaseScale) {\n    this._scaleZ = s;\n  }\n\n  _xAxisHelper!: IAxisHelper;\n  getXAxisHelper() {\n    return this._xAxisHelper;\n  }\n  setXAxisHelper(h: IAxisHelper) {\n    this._xAxisHelper = h;\n    this.onXAxisHelperUpdate();\n  }\n\n  _yAxisHelper!: IAxisHelper;\n  getYAxisHelper() {\n    return this._yAxisHelper;\n  }\n  setYAxisHelper(h: IAxisHelper) {\n    this._yAxisHelper = h;\n    this.onYAxisHelperUpdate();\n  }\n\n  _zAxisHelper?: IAxisHelper;\n  getZAxisHelper() {\n    return this._zAxisHelper;\n  }\n  setZAxisHelper(h: IAxisHelper) {\n    this._zAxisHelper = h;\n    this.onYAxisHelperUpdate();\n  }\n\n  protected _sortDataByAxis: boolean = false;\n  get sortDataByAxis() {\n    return this._sortDataByAxis;\n  }\n\n  getStatisticFields() {\n    const fields: { key: string; operations: StatisticOperations }[] = [];\n    const axes = [\n      {\n        axisHelper: this.getXAxisHelper(),\n        fields: this._fieldX2 ? [...this._fieldX, this._fieldX2] : this._fieldX\n      },\n      {\n        axisHelper: this.getYAxisHelper(),\n        fields: this._fieldY2 ? [...this._fieldY, this._fieldY2] : this._fieldY\n      },\n      {\n        axisHelper: this.getZAxisHelper(),\n        fields: this._fieldZ\n      }\n    ];\n\n    axes.forEach(axisOption => {\n      if (axisOption.axisHelper && axisOption.axisHelper.getScale && axisOption.fields) {\n        axisOption.fields.forEach(f => {\n          const result: { key: string; operations: Array<'max' | 'min' | 'values'>; filter?: (fv: any) => boolean } = {\n            key: f,\n            operations: []\n          };\n          const scale = axisOption.axisHelper.getScale(0);\n          if (isContinuous(scale.type)) {\n            result.operations = ['max', 'min'];\n\n            if (scale.type === 'log') {\n              result.filter = (fv: any) => fv > 0;\n            }\n          } else {\n            result.operations = ['values'];\n          }\n          fields.push(result);\n        });\n      }\n    });\n\n    if (this.getStack()) {\n      fields.push({\n        key: this.getStackValueField(),\n        operations: ['allValid']\n      });\n    }\n    return fields;\n  }\n\n  getGroupFields() {\n    return this.direction === 'vertical' ? this._fieldX : this._fieldY;\n  }\n\n  getStackGroupFields(): string[] {\n    return this.getGroupFields();\n  }\n\n  getStackValue() {\n    const axisId = (\n      this.direction === Direction.horizontal ? this.getXAxisHelper() : this.getYAxisHelper()\n    )?.getAxisId();\n    return this._spec.stackValue ?? `${PREFIX}_series_${this.type}_${axisId}`;\n  }\n\n  getStackValueField() {\n    // TODO: hack\n    if (this.direction === Direction.horizontal) {\n      return array(this._spec.xField)[0];\n    }\n    return array(this._spec.yField)[0];\n  }\n\n  setValueFieldToStack(): void {\n    if (this.direction === Direction.horizontal) {\n      this.setFieldX(STACK_FIELD_END);\n      this.setFieldX2(STACK_FIELD_START);\n    } else {\n      this.setFieldY(STACK_FIELD_END);\n      this.setFieldY2(STACK_FIELD_START);\n    }\n  }\n\n  setValueFieldToPercent(): void {\n    if (this.direction === Direction.horizontal) {\n      this.setFieldX(STACK_FIELD_END_PERCENT);\n      this.setFieldX2(STACK_FIELD_START_PERCENT);\n    } else {\n      this.setFieldY(STACK_FIELD_END_PERCENT);\n      this.setFieldY2(STACK_FIELD_START_PERCENT);\n    }\n  }\n\n  setValueFieldToStackOffsetSilhouette(): void {\n    if (this.direction === Direction.horizontal) {\n      this.setFieldX(STACK_FIELD_END_OffsetSilhouette);\n      this.setFieldX2(STACK_FIELD_START_OffsetSilhouette);\n    } else {\n      this.setFieldY(STACK_FIELD_END_OffsetSilhouette);\n      this.setFieldY2(STACK_FIELD_START_OffsetSilhouette);\n    }\n  }\n\n  onXAxisHelperUpdate(): void {\n    this.onMarkPositionUpdate();\n  }\n\n  onYAxisHelperUpdate(): void {\n    this.onMarkPositionUpdate();\n  }\n\n  onZAxisHelperUpdate(): void {\n    this.onMarkPositionUpdate();\n  }\n\n  setAttrFromSpec() {\n    super.setAttrFromSpec();\n    this.setFieldX(this._spec.xField);\n    this.setFieldY(this._spec.yField);\n    this.setFieldZ(this._spec.zField);\n    this._specXField = array(this._spec.xField);\n    this._specYField = array(this._spec.yField);\n    if (isValid(this._spec.direction)) {\n      this._direction = this._spec.direction;\n    }\n\n    this.setFieldX2(this._spec?.x2Field);\n    this.setFieldY2(this._spec?.y2Field);\n\n    if (this.getStack()) {\n      this.setValueFieldToStack();\n    }\n    if (this.getPercent()) {\n      this.setValueFieldToPercent();\n    }\n    if (this.getStackOffsetSilhouette()) {\n      this.setValueFieldToStackOffsetSilhouette();\n    }\n\n    if (isValid(this._spec.sortDataByAxis)) {\n      this._sortDataByAxis = this._spec.sortDataByAxis === true;\n    }\n  }\n\n  dataToPosition(datum: Datum, checkInViewData?: boolean): IPoint | null {\n    if (!datum) {\n      return null;\n    }\n    if (checkInViewData && !this.isDatumInViewData(datum)) {\n      return null;\n    }\n    return {\n      x: this.dataToPositionX(datum),\n      y: this.dataToPositionY(datum)\n    } as IPoint;\n  }\n\n  protected _buildMarkAttributeContext() {\n    super._buildMarkAttributeContext();\n    // position\n    this._markAttributeContext.valueToX = this.valueToPositionX.bind(this);\n    this._markAttributeContext.valueToY = this.valueToPositionY.bind(this);\n    this._markAttributeContext.xBandwidth = (depth: number = 0) => this.getXAxisHelper().getBandwidth?.(depth) ?? 0;\n    this._markAttributeContext.yBandwidth = (depth: number = 0) => this.getYAxisHelper().getBandwidth?.(depth) ?? 0;\n    this._markAttributeContext.valueToPosition = this.valueToPosition.bind(this);\n  }\n\n  valueToPosition(xValue: StringOrNumber | StringOrNumber[], yValue: StringOrNumber | StringOrNumber[]) {\n    return {\n      x: this.valueToPositionX(xValue),\n      y: this.valueToPositionY(yValue)\n    };\n  }\n\n  protected _axisPosition(helper: IAxisHelper, value: StringOrNumber | StringOrNumber[], datum?: any) {\n    this._scaleConfig.datum = datum;\n    if (helper.isContinuous) {\n      return helper.valueToPosition(value, this._scaleConfig);\n    }\n    return helper.dataToPosition(array(value), this._scaleConfig);\n  }\n\n  valueToPositionX(value: StringOrNumber | StringOrNumber[], datum?: any) {\n    return this._axisPosition(this._xAxisHelper, value, datum);\n  }\n  valueToPositionY(value: StringOrNumber | StringOrNumber[], datum?: any) {\n    return this._axisPosition(this._yAxisHelper, value, datum);\n  }\n\n  protected _dataToPosition(\n    datum: Datum,\n    axisHelper: IAxisHelper,\n    field: string[],\n    scaleDepth: number | undefined,\n    getEncoder: () => (datum: Datum) => number,\n    setEncoder: (encoder: (datum: Datum) => number) => void\n  ): number {\n    const encoder = getEncoder();\n    if (encoder) {\n      return encoder(datum);\n    }\n\n    if (!axisHelper) {\n      setEncoder((datum: Datum) => Number.NaN);\n      return Number.NaN;\n    }\n    const fields = (axisHelper.getFields ? axisHelper.getFields() : field).slice(0, scaleDepth);\n    if (!fields || fields.length === 0) {\n      setEncoder((datum: Datum) => null);\n      return null;\n    }\n\n    if (axisHelper.isContinuous) {\n      setEncoder((datum: Datum) => {\n        this._scaleConfig.datum = datum;\n        return axisHelper.valueToPosition(this.getDatumPositionValue(datum, fields[0]), this._scaleConfig);\n      });\n    } else {\n      setEncoder((datum: Datum) => {\n        this._scaleConfig.datum = datum;\n        return axisHelper.dataToPosition(array(this.getDatumPositionValues(datum, fields)), this._scaleConfig);\n      });\n    }\n\n    return getEncoder()(datum);\n  }\n\n  protected _positionXEncoder?: (datum: Datum) => number;\n  protected _getPositionXEncoder = () => this._positionXEncoder?.bind(this);\n  protected _setPositionXEncoder = (encoder: (datum: Datum) => number) => {\n    this._positionXEncoder = encoder.bind(this);\n  };\n\n  dataToPositionX(datum: Datum): number {\n    return this._dataToPosition(\n      datum,\n      this._xAxisHelper,\n      this.fieldX,\n      undefined,\n      this._getPositionXEncoder,\n      this._setPositionXEncoder\n    );\n  }\n\n  protected _positionYEncoder?: (datum: Datum) => number;\n  protected _getPositionYEncoder = () => this._positionYEncoder?.bind(this);\n  protected _setPositionYEncoder = (encoder: (datum: Datum) => number) => {\n    this._positionYEncoder = encoder.bind(this);\n  };\n\n  dataToPositionY(datum: Datum): number {\n    return this._dataToPosition(\n      datum,\n      this._yAxisHelper,\n      this.fieldY,\n      undefined,\n      this._getPositionYEncoder,\n      this._setPositionYEncoder\n    );\n  }\n\n  dataToPositionZ(datum: Datum): number {\n    if (!this._zAxisHelper) {\n      return Number.NaN;\n    }\n    const { dataToPosition } = this._zAxisHelper;\n\n    return dataToPosition(this.getDatumPositionValues(datum, this._fieldZ), {\n      bandPosition: this._bandPosition\n    });\n  }\n\n  dataToPositionX1(datum: Datum): number {\n    if (!this._xAxisHelper) {\n      return Number.NaN;\n    }\n    return this._fieldX2 && this._fieldX2 in datum\n      ? this.valueToPositionX(this.getDatumPositionValues(datum, this._fieldX2))\n      : this.valueToPositionX(0);\n  }\n\n  dataToPositionY1(datum: Datum): number {\n    if (!this._yAxisHelper) {\n      return Number.NaN;\n    }\n    return this._fieldY2 && this._fieldY2 in datum\n      ? this.valueToPositionY(this.getDatumPositionValues(datum, this._fieldY2))\n      : this.valueToPositionY(0);\n  }\n\n  positionToData(p: IPoint): IPoint | null {\n    if (!p) {\n      return null;\n    }\n    return {\n      x: this.positionToDataX(p.x),\n      y: this.positionToDataY(p.y)\n    };\n  }\n\n  positionToDataX(xPos: number): any | null {\n    if (!this._scaleX) {\n      return null;\n    }\n    return this._scaleX.invert(xPos);\n  }\n\n  positionToDataY(yPos: number): any | null {\n    if (!this._scaleY) {\n      return null;\n    }\n    return this._scaleY.invert(yPos);\n  }\n\n  getRegionRectLeft(): number {\n    if (!this._xAxisHelper) {\n      return Number.NaN;\n    }\n    const { getScale } = this._xAxisHelper;\n    return getScale(0).range()[0];\n  }\n\n  getRegionRectRight(): number {\n    if (!this._xAxisHelper) {\n      return Number.NaN;\n    }\n    const { getScale } = this._xAxisHelper;\n    return getScale(0).range()[1];\n  }\n\n  afterInitMark(): void {\n    super.afterInitMark();\n    this.setFieldX(this._fieldX);\n    this.setFieldY(this._fieldY);\n    this._buildScaleConfig();\n  }\n\n  getDimensionField(): string[] {\n    if (this._direction === Direction.horizontal) {\n      return this._specYField;\n    }\n    return this._specXField;\n  }\n\n  getDimensionContinuousField(): string[] {\n    if (this._direction === Direction.horizontal) {\n      return [this.fieldY[0], this.fieldY2];\n    }\n    return [this.fieldX[0], this.fieldX2];\n  }\n\n  getMeasureField(): string[] {\n    if (this._direction === Direction.horizontal) {\n      return this._specXField;\n    }\n    return this._specYField;\n  }\n\n  protected initEvent() {\n    super.initEvent();\n    // 通过轴事件来进行排序。轴的domain数据变化在系列的统计数据完成后\n    if (this.sortDataByAxis) {\n      this.event.on(\n        ChartEvent.scaleDomainUpdate,\n        {\n          filter: param =>\n            param.model.id ===\n            (this._direction === Direction.horizontal ? this._yAxisHelper : this._xAxisHelper)?.getAxisId()\n        },\n        () => {\n          // 只能排序，不能修改数据，此时已经在数据流的统计流程之后\n          this._sortDataInAxisDomain();\n        }\n      );\n    }\n  }\n\n  _sortDataInAxisDomain() {\n    if (this.getViewData()?.latestData?.length) {\n      sortDataInAxisHelper(\n        this._direction === Direction.horizontal ? this._yAxisHelper : this._xAxisHelper,\n        this._direction === Direction.horizontal ? this._fieldY[0] : this._fieldX[0],\n        this.getViewData().latestData\n      );\n      this._data?.updateData(true);\n    }\n  }\n\n  protected getInvalidCheckFields() {\n    const fields: string[] = [];\n\n    if (\n      this._xAxisHelper &&\n      this._xAxisHelper.isContinuous &&\n      this._xAxisHelper.getAxisType() !== ComponentTypeEnum.geoCoordinate\n    ) {\n      const xFields = this._xAxisHelper.getFields ? this._xAxisHelper.getFields() : this._specXField;\n      xFields.forEach(f => {\n        fields.push(f);\n      });\n    }\n\n    if (\n      this._yAxisHelper &&\n      this._yAxisHelper.isContinuous &&\n      this._yAxisHelper.getAxisType() !== ComponentTypeEnum.geoCoordinate\n    ) {\n      const yFields = this._yAxisHelper.getFields ? this._yAxisHelper.getFields() : this._specYField;\n\n      yFields.forEach(f => {\n        fields.push(f);\n      });\n    }\n    return fields;\n  }\n\n  reInit(spec: T) {\n    if (this._positionXEncoder) {\n      this._positionXEncoder = null;\n    }\n    if (this._positionYEncoder) {\n      this._positionYEncoder = null;\n    }\n\n    super.reInit(spec);\n  }\n}\n"]}