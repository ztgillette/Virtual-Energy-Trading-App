{"version":3,"sources":["../src/series/progress/linear/linear.ts"],"names":[],"mappings":"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","file":"linear.js","sourcesContent":["/* eslint-disable no-duplicate-imports */\nimport { CartesianSeries } from '../../cartesian/cartesian';\nimport type { SeriesMarkMap } from '../../interface';\nimport { SeriesMarkNameEnum, SeriesTypeEnum } from '../../interface/type';\nimport { valueInScaleRange } from '../../../util/scale';\nimport { AttributeLevel } from '../../../constant/attribute';\nimport type { Datum } from '../../../typings';\nimport { animationConfig, userAnimationConfig } from '../../../animation/utils';\nimport { registerLinearProgressAnimation } from './animation';\nimport type {\n  ILinearProgressAnimationParams,\n  ILinearProgressSeriesSpec,\n  LinearProgressAppearPreset\n} from './interface';\nimport { LinearProgressSeriesTooltipHelper } from './tooltip-helper';\nimport type { IStateAnimateSpec } from '../../../animation/spec';\nimport { registerRectMark } from '../../../mark/rect';\nimport type { ICustomPath2D } from '@visactor/vrender-core';\nimport { linearProgressSeriesMark } from './constant';\nimport { Factory } from '../../../core/factory';\nimport { registerFadeInOutAnimation } from '../../../animation/config';\nimport type { IMark, IRectMark } from '../../../mark/interface';\nimport { isNil, isValid } from '@visactor/vutils';\nimport { linearProgress } from '../../../theme/builtin/common/series/linear-progress';\n\nexport class LinearProgressSeries<\n  T extends ILinearProgressSeriesSpec = ILinearProgressSeriesSpec\n> extends CartesianSeries<T> {\n  static readonly type: string = SeriesTypeEnum.linearProgress;\n  type = SeriesTypeEnum.linearProgress;\n\n  static readonly mark: SeriesMarkMap = linearProgressSeriesMark;\n  static readonly builtInTheme = { linearProgress };\n\n  private _progressMark: IRectMark | null = null;\n  private _trackMark: IRectMark | null = null;\n\n  initMark(): void {\n    this._initTrackMark();\n    this._initProgressMark();\n  }\n\n  initMarkStyle(): void {\n    this._initTrackMarkStyle();\n    this._initProgressMarkStyle();\n  }\n\n  private _initProgressMark() {\n    this._progressMark = this._createMark(LinearProgressSeries.mark.progress, {\n      isSeriesMark: true\n    }) as IRectMark;\n\n    if (isNil(this._spec.progress?.customShape)) {\n      this._progressMark.setMarkConfig({\n        setCustomizedShape: this._defaultProgressCustomShape\n      });\n    }\n    return this._progressMark;\n  }\n\n  private _initProgressMarkStyle() {\n    const progressMark = this._progressMark;\n    if (progressMark) {\n      if (this._spec.direction === 'vertical') {\n        const progress = this._spec.progress || {};\n        const leftPadding = progress.leftPadding ?? 0;\n        const rightPadding = progress.rightPadding ?? 0;\n\n        this.setMarkStyle(\n          progressMark,\n          {\n            x: (datum: Datum) => {\n              return (\n                valueInScaleRange(this.dataToPositionX(datum), this._xAxisHelper?.getScale?.(0), true) -\n                this._spec.bandWidth / 2 +\n                leftPadding\n              );\n            },\n            y1: (datum: Datum) => valueInScaleRange(this.dataToPositionY(datum), this._yAxisHelper?.getScale?.(0)),\n            y: () => {\n              const value = this._yAxisHelper?.dataToPosition([0], { bandPosition: this._bandPosition });\n              return this._spec.clamp ? valueInScaleRange(value, this._yAxisHelper?.getScale?.(0)) : value;\n            },\n            width: this._spec.bandWidth - leftPadding - rightPadding,\n            cornerRadius: this._spec.cornerRadius,\n            fill: this.getColorAttribute()\n          },\n          'normal',\n          AttributeLevel.Series\n        );\n      } else {\n        const progress = this._spec.progress || {};\n        const topPadding = progress.topPadding ?? 0;\n        const bottomPadding = progress.bottomPadding ?? 0;\n\n        this.setMarkStyle(\n          progressMark,\n          {\n            x1: (datum: Datum) => valueInScaleRange(this.dataToPositionX(datum), this._xAxisHelper?.getScale?.(0)),\n            y: (datum: Datum) => {\n              return (\n                valueInScaleRange(this.dataToPositionY(datum), this._yAxisHelper?.getScale?.(0), true) -\n                this._spec.bandWidth / 2 +\n                topPadding\n              );\n            },\n            height: this._spec.bandWidth - topPadding - bottomPadding,\n            x: () => {\n              const value = this._xAxisHelper?.dataToPosition([0], { bandPosition: this._bandPosition });\n              return this._spec.clamp ? valueInScaleRange(value, this._xAxisHelper?.getScale?.(0)) : value;\n            },\n            cornerRadius: this._spec.cornerRadius,\n            fill: this.getColorAttribute()\n          },\n          'normal',\n          AttributeLevel.Series\n        );\n      }\n    }\n  }\n\n  private _defaultProgressCustomShape = (datum: any[], attrs: any, path: ICustomPath2D) => {\n    const cornerRadius = this._spec?.cornerRadius;\n    const width = isValid(attrs.width) ? attrs.width : attrs.x1 - attrs.x;\n    const height = isValid(attrs.height) ? attrs.height : attrs.y1 - attrs.y;\n    const x0 = Math.min(0, width);\n    const x1 = Math.max(0, width);\n    const y0 = Math.min(0, height);\n    const y1 = Math.max(0, height);\n\n    if (cornerRadius > 0) {\n      let realCornerRadius = cornerRadius;\n\n      if (this._spec?.direction === 'vertical') {\n        realCornerRadius = Math.min(Math.abs(width / 2), cornerRadius);\n\n        if (2 * realCornerRadius > Math.abs(height)) {\n          const angle = Math.acos((realCornerRadius - Math.abs(height) / 2) / realCornerRadius);\n\n          path.moveTo(x0 + realCornerRadius, y0);\n          path.arc(\n            x0 + realCornerRadius,\n            y0 + realCornerRadius,\n            realCornerRadius,\n            1.5 * Math.PI,\n            1.5 * Math.PI - angle,\n            true\n          );\n          path.arc(\n            x0 + realCornerRadius,\n            y1 - realCornerRadius,\n            realCornerRadius,\n            angle + Math.PI / 2,\n            Math.PI / 2,\n            true\n          );\n\n          path.lineTo(x1 - cornerRadius, y1);\n          path.arc(\n            x1 - realCornerRadius,\n            y1 - realCornerRadius,\n            realCornerRadius,\n            Math.PI / 2,\n            Math.PI / 2 - angle,\n            true\n          );\n          path.arc(\n            x1 - realCornerRadius,\n            y0 + realCornerRadius,\n            realCornerRadius,\n            -Math.PI / 2 + angle,\n            -Math.PI / 2,\n            true\n          );\n          path.lineTo(x0 + realCornerRadius, y0);\n\n          path.closePath();\n\n          return path;\n        }\n      } else {\n        realCornerRadius = Math.min(Math.abs(height / 2), cornerRadius);\n\n        if (2 * realCornerRadius > Math.abs(width)) {\n          const angle = Math.acos((realCornerRadius - Math.abs(width) / 2) / realCornerRadius);\n          path.moveTo(x0, y0 + realCornerRadius);\n          path.arc(x0 + realCornerRadius, y0 + realCornerRadius, realCornerRadius, Math.PI, Math.PI + angle);\n          path.arc(x1 - realCornerRadius, y0 + realCornerRadius, realCornerRadius, -angle, 0);\n          path.lineTo(x1, y1 - realCornerRadius);\n          path.arc(x1 - realCornerRadius, y1 - realCornerRadius, realCornerRadius, 0, angle);\n          path.arc(x0 + realCornerRadius, y1 - realCornerRadius, realCornerRadius, Math.PI - angle, Math.PI);\n          path.closePath();\n\n          return path;\n        }\n      }\n\n      path.moveTo(x0, y0 + realCornerRadius);\n      path.arc(x0 + realCornerRadius, y0 + realCornerRadius, realCornerRadius, Math.PI, 1.5 * Math.PI);\n      path.lineTo(x1 - realCornerRadius, y0);\n      path.arc(x1 - realCornerRadius, y0 + realCornerRadius, realCornerRadius, -Math.PI / 2, 0);\n      path.lineTo(x1, y1 - realCornerRadius);\n      path.arc(x1 - realCornerRadius, y1 - realCornerRadius, realCornerRadius, 0, Math.PI / 2);\n      path.lineTo(x0 + realCornerRadius, y1);\n      path.arc(x0 + realCornerRadius, y1 - realCornerRadius, realCornerRadius, Math.PI / 2, Math.PI);\n      path.closePath();\n    } else {\n      path.moveTo(x0, y0);\n      path.lineTo(x1, y0);\n      path.lineTo(x1, y1);\n      path.lineTo(x0, y1);\n      path.closePath();\n    }\n\n    return path;\n  };\n\n  private _initTrackMark() {\n    this._trackMark = this._createMark(LinearProgressSeries.mark.track) as IRectMark;\n    return this._trackMark;\n  }\n\n  private _initTrackMarkStyle() {\n    const trackMark = this._trackMark;\n    if (trackMark) {\n      if (this._spec.direction === 'vertical') {\n        this.setMarkStyle(\n          trackMark,\n          {\n            x: (datum: any) => {\n              return (\n                valueInScaleRange(this.dataToPositionX(datum), this._xAxisHelper?.getScale?.(0), true) -\n                this._spec.bandWidth / 2\n              );\n            },\n            y: 0,\n            width: this._spec.bandWidth,\n            height: () => this._scaleY.range()[0],\n            cornerRadius: this._spec.cornerRadius\n          },\n          'normal',\n          AttributeLevel.Series\n        );\n      } else {\n        this.setMarkStyle(\n          trackMark,\n          {\n            x: 0,\n            y: (datum: any) => {\n              return (\n                valueInScaleRange(this.dataToPositionY(datum), this._yAxisHelper?.getScale?.(0), true) -\n                this._spec.bandWidth / 2\n              );\n            },\n            height: this._spec.bandWidth,\n            width: () => this._scaleX.range()[1],\n            cornerRadius: this._spec.cornerRadius\n          },\n          'normal',\n          AttributeLevel.Series\n        );\n      }\n    }\n  }\n\n  getInteractionTriggers() {\n    const marks: IMark[] = [];\n\n    if (this._trackMark) {\n      marks.push(this._trackMark);\n    }\n\n    if (this._progressMark) {\n      marks.push(this._progressMark);\n    }\n    return this._parseInteractionConfig(marks);\n  }\n\n  initAnimation() {\n    const animationParams: ILinearProgressAnimationParams = {\n      direction: this.direction\n    };\n\n    const appearPreset = (this._spec?.animationAppear as IStateAnimateSpec<LinearProgressAppearPreset>)?.preset;\n\n    this._progressMark.setAnimationConfig(\n      animationConfig(\n        Factory.getAnimationInKey('linearProgress')?.(animationParams, appearPreset),\n        userAnimationConfig(SeriesMarkNameEnum.progress, this._spec, this._markAttributeContext)\n      )\n    );\n\n    this._trackMark.setAnimationConfig(\n      animationConfig(\n        Factory.getAnimationInKey('fadeInOut')?.(),\n        userAnimationConfig(SeriesMarkNameEnum.track, this._spec, this._markAttributeContext)\n      )\n    );\n  }\n\n  protected initTooltip() {\n    this._tooltipHelper = new LinearProgressSeriesTooltipHelper(this);\n    this._progressMark && this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark);\n    this._trackMark && this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark);\n  }\n\n  getActiveMarks(): IMark[] {\n    return [this._progressMark];\n  }\n}\n\nexport const registerLinearProgressSeries = () => {\n  registerRectMark();\n  registerLinearProgressAnimation();\n  registerFadeInOutAnimation();\n  Factory.registerSeries(LinearProgressSeries.type, LinearProgressSeries);\n};\n"]}