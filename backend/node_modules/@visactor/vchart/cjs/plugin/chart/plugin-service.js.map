{"version":3,"sources":["../src/plugin/chart/plugin-service.ts"],"names":[],"mappings":";;;AAEA,qEAAgE;AAIhE,MAAa,kBACX,SAAQ,uCAAoB;IAK5B,YAAY,cAAuB;QACjC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACvC,CAAC;IAED,MAAM,CAAC,SAAc;QACnB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC7B,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc,CAAC,KAAa,EAAE,MAAc;QAC1C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC7B,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yBAAyB,CAAC,SAAc,EAAE,YAAsC;QAC9E,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC7B,MAAM,CAAC,yBAAyB,IAAI,MAAM,CAAC,yBAAyB,CAAC,IAAI,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;QACtG,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yBAAyB,CAAC,SAAc,EAAE,aAA6B,EAAE,YAAsC;QAC7G,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC7B,MAAM,CAAC,yBAAyB;gBAC9B,MAAM,CAAC,yBAAyB,CAAC,IAAI,EAAE,SAAS,EAAE,aAAa,EAAE,YAAY,CAAC,CAAC;QACnF,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iBAAiB,CAAC,SAAc,EAAE,YAAsC;QACtE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC7B,MAAM,CAAC,iBAAiB,IAAI,MAAM,CAAC,iBAAiB,CAAC,IAAI,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;QACtF,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU;QACR,KAAK,CAAC,UAAU,EAAE,CAAC;QACnB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC7B,CAAC;CACF;AA9CD,gDA8CC","file":"plugin-service.js","sourcesContent":["import type { IChartPlugin, IChartPluginService } from './interface';\nimport type { IVChart } from '../../core';\nimport { BasePluginService } from '../base/base-plugin-service';\nimport type { VChartRenderActionSource } from '../../core/interface';\nimport type { IChartSpecInfo } from '../../chart/interface/common';\n\nexport class ChartPluginService<T extends IChartPlugin = IChartPlugin>\n  extends BasePluginService<T>\n  implements IChartPluginService<T>\n{\n  globalInstance: IVChart;\n\n  constructor(globalInstance: IVChart) {\n    super();\n    this.globalInstance = globalInstance;\n  }\n\n  onInit(chartSpec: any) {\n    this._plugins.forEach(plugin => {\n      plugin.onInit && plugin.onInit(this, chartSpec);\n    });\n  }\n\n  onBeforeResize(width: number, height: number) {\n    this._plugins.forEach(plugin => {\n      plugin.onBeforeResize && plugin.onBeforeResize(this, width, height);\n    });\n  }\n\n  onAfterChartSpecTransform(chartSpec: any, actionSource: VChartRenderActionSource) {\n    this._plugins.forEach(plugin => {\n      plugin.onAfterChartSpecTransform && plugin.onAfterChartSpecTransform(this, chartSpec, actionSource);\n    });\n  }\n\n  onAfterModelSpecTransform(chartSpec: any, chartSpecInfo: IChartSpecInfo, actionSource: VChartRenderActionSource) {\n    this._plugins.forEach(plugin => {\n      plugin.onAfterModelSpecTransform &&\n        plugin.onAfterModelSpecTransform(this, chartSpec, chartSpecInfo, actionSource);\n    });\n  }\n\n  onBeforeInitChart(chartSpec: any, actionSource: VChartRenderActionSource) {\n    this._plugins.forEach(plugin => {\n      plugin.onBeforeInitChart && plugin.onBeforeInitChart(this, chartSpec, actionSource);\n    });\n  }\n\n  releaseAll(): void {\n    super.releaseAll();\n    this.globalInstance = null;\n  }\n}\n"]}