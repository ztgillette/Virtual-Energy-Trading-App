{"version":3,"sources":["../src/component/legend/discrete/interface.ts"],"names":[],"mappings":"","file":"interface.js","sourcesContent":["import type { IRectMarkSpec, ISymbolMarkSpec, ITextMarkSpec } from '../../../typings/visual';\nimport type {\n  DiscreteLegendAttrs,\n  LegendItemDatum,\n  LegendItem,\n  LegendPagerAttributes,\n  LegendScrollbarAttributes\n} from '@visactor/vrender-components';\nimport type { ILegendCommonSpec, NoVisibleMarkStyle } from '../interface';\nimport type { IFormatMethod, StringOrNumber } from '../../../typings';\nimport type { IBaseScale } from '@visactor/vscale';\nimport type { IGlobalScale } from '../../../scale/interface';\nimport type { ComponentThemeWithDirection } from '../../interface';\n\n// export type formatterCallback = (text: StringOrNumber, item: LegendItemDatum, index: number) => any;\nexport type formatterCallback = IFormatMethod<[text: StringOrNumber, item: LegendItemDatum, index: number]>;\nexport type LegendItemStyleValue<T> =\n  | T\n  | ((item: LegendItemDatum, isSelected: boolean, index: number, allItems: LegendItemDatum[]) => T);\nexport type LegendItemStyle<T> = {\n  /**\n   * 样式配置\n   */\n  style?: T;\n  /**\n   * 状态样式配置\n   */\n  state?: {\n    /**\n     * 选中态\n     */\n    selected?: T;\n    /**\n     * 非选中态\n     */\n    unSelected?: T;\n    /**\n     * 选中态 hover\n     */\n    selectedHover?: T;\n    /**\n     * 非选中态 hover\n     */\n    unSelectedHover?: T;\n  };\n};\n\nexport type IItem = {\n  /**\n   * @since 1.10.0\n   * 指定图例项中图标和文字的摆放位置，可选值为：\n   * 'left' 图标在左侧\n   * 'right' 图标在右侧\n   * 默认值为： 'left'\n   */\n  align?: 'left' | 'right';\n  /**\n   * 图例项背景配置\n   */\n  background?: {\n    /**\n     * 是否展示图例项背景\n     */\n    visible?: boolean;\n  } & LegendItemStyle<LegendItemStyleValue<NoVisibleMarkStyle<IRectMarkSpec>>>;\n  /**\n   * 图例项的 shape 图标的配置\n   */\n  shape?: {\n    /**\n     * 图例项的 shape 图标\n     */\n    visible?: boolean;\n    /** shape 同后面 label 的间距 */\n    space?: number;\n  } & LegendItemStyle<LegendItemStyleValue<Partial<NoVisibleMarkStyle<ISymbolMarkSpec>>>>;\n  /**\n   * 图例项的 label 文本配置\n   */\n  label?: {\n    /**\n     * @since 1.10.0\n     * 当 label + value 同时展示，文字超长的时候，label的宽度占比\n     */\n    widthRatio?: number;\n    /**\n     * 图例项 label 同后面 value 的间距\n     */\n    space?: number;\n    /**\n     * 格式化文本函数\n     */\n    formatMethod?: formatterCallback;\n    /**\n     * 格式化模板\n     * @description 可以通过类似 `{value:.2f}%` 的形式对指定数据字段进行格式化\n     * @since 1.10.0\n     */\n    formatter?: string;\n  } & LegendItemStyle<LegendItemStyleValue<NoVisibleMarkStyle<ITextMarkSpec>>>;\n  /**\n   * 图例项 value 配置\n   */\n  value?: {\n    /**\n     * @since 1.10.0\n     * 当 label + value 同时展示，文字超长的时候，label的宽度占比\n     */\n    widthRatio?: number;\n    /** value 同后面元素的间距 */\n    space?: number;\n    /**\n     * 是否右对齐显示，仅当设置图例项宽度 itemWidth 时生效\n     * 默认为 false，\n     */\n    alignRight?: boolean;\n    /**\n     * 格式化文本函数\n     */\n    formatMethod?: formatterCallback;\n    /**\n     * 格式化模板\n     * @description 可以通过类似 `{value:.2f}%` 的形式对指定数据字段进行格式化\n     * @since 1.10.0\n     */\n    formatter?: string | string[];\n  } & LegendItemStyle<LegendItemStyleValue<NoVisibleMarkStyle<ITextMarkSpec>>>;\n  /**\n   * 聚焦按钮配置\n   */\n  focusIconStyle?: NoVisibleMarkStyle<ISymbolMarkSpec>;\n  /**\n   * 图例项的最大宽度，默认为 null。\n   * 可使用百分比，表示显示区域的宽度占比。\n   */\n  maxWidth?: number | string;\n  /**\n   * 图例项的宽度, 默认自动计算。\n   * 可使用百分比，表示显示区域的宽度占比。\n   */\n  width?: number | string;\n  /**\n   * 图例的高度，默认自动计算。\n   * 可使用百分比，表示显示区域的高度占比。\n   */\n  height?: number | string;\n  /**\n   * @since 1.10.0\n   * 当label+ value同时存在的时候，自动省略的策略\n   * 'labelFirst' - 尽量保证完整展示`label`\n   * 'valueFirst' - 尽量保证完整展示`value`\n   * 'none' - 按照`widthRatio`展示label 和 value\n   */\n  autoEllipsisStrategy?: 'labelFirst' | 'valueFirst' | 'none';\n} & Omit<LegendItem, 'background' | 'shape' | 'label' | 'value' | 'focusIconStyle' | 'width' | 'height' | 'maxWidth'>;\n\nexport type IPager = {\n  /**\n   * 文本样式配置\n   */\n  textStyle?: Partial<NoVisibleMarkStyle<ITextMarkSpec>>;\n  handler?: {\n    /**\n     * 按钮同文本内容区的间距，默认为 8\n     */\n    space?: number;\n    /**\n     * 上一页按钮形状\n     */\n    preShape?: string;\n    /**\n     * 下一页按钮形状\n     */\n    nextShape?: string;\n    style?: Omit<NoVisibleMarkStyle<ISymbolMarkSpec>, 'symbolType'>;\n    state?: {\n      /**\n       * hover 状态下的样式\n       */\n      hover?: Omit<NoVisibleMarkStyle<ISymbolMarkSpec>, 'symbolType'>;\n      /**\n       * 不可用状态样式\n       */\n      disable?: Omit<NoVisibleMarkStyle<ISymbolMarkSpec>, 'symbolType'>;\n    };\n  };\n} & Omit<LegendPagerAttributes, 'textStyle' | 'handler'>;\n\nexport type ILegendScrollbar = {\n  type: 'scrollbar';\n  railStyle?: Omit<Partial<NoVisibleMarkStyle<IRectMarkSpec>>, 'width' | 'height'>;\n  sliderStyle?: Omit<Partial<NoVisibleMarkStyle<IRectMarkSpec>>, 'width' | 'height'>;\n} & Omit<LegendScrollbarAttributes, 'railStyle' | 'sliderStyle'>;\n\n/** spec */\nexport type IDiscreteLegendSpec = ILegendCommonSpec & {\n  type?: 'discrete';\n  /**\n   * 在原始图例绘制数据的基础上，进行自定义，比如可以自定义 value 值\n   * @param data 图例的绘制数据\n   * @param colorScale 全局颜色映射 scale\n   * @param globalScale 图表上所有的 scale\n   * @returns\n   */\n  data?: (data: LegendItemDatum[], colorScale: IBaseScale, globalScale: IGlobalScale) => LegendItemDatum[];\n\n  /** 图例项配置 */\n  item?: IItem;\n\n  /**\n   * 翻页器配置\n   */\n  pager?: IPager | ILegendScrollbar;\n  /**\n   * scale must match the id of the scale configured in **scales**\n   * 离散图例对应的scale\n   * @since 1.10.5\n   */\n  scale?: string;\n  /**\n   * 同`scale`，为了和连续图例保持一致，建议统一为`scale`\n   */\n  scaleName?: string;\n  /**\n   * After the legend is bound to the scale, the dimension associated with the series data and the legend can be configured through field.\n   * If the field is not configured, the first item of fields in the domain of scale is used by default\n   * If the domain of the scale is not dependent on data statistics, series.getSeriesField() is used by default\n   */\n  field?: string;\n  /**\n   * 默认筛选的数据范围\n   */\n  defaultSelected?: string[];\n} & Omit<DiscreteLegendAttrs, 'layout' | 'title' | 'items' | 'item' | 'pager'>;\n\n// theme 主题相关配置\nexport type IDiscreteLegendCommonTheme = Omit<\n  IDiscreteLegendSpec,\n  'type' | 'data' | 'regionIndex' | 'regionId' | 'seriesIndex' | 'seriesId' | 'id' | 'defaultSelected'\n>;\n\nexport type IDiscreteLegendTheme = ComponentThemeWithDirection<IDiscreteLegendCommonTheme>;\n"]}